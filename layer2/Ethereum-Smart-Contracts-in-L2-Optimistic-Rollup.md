# äºŒå±‚ç½‘ç»œä¸Šçš„ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦: **Optimistic Rollup**





è¿™ç¯‡æ–‡ç« æ¦‚è¿°äº†optimistic rollupï¼šä¸€ç§ä½¿ç”¨[OVM](https://medium.com/plasma-group/introducing-the-ovm-db253287af50)åœ¨äºŒå±‚ç½‘ç½‘ç»œä¸Šå¯ç”¨æ™ºèƒ½åˆçº¦çš„ç»“æ„ã€‚ è¯¥æ„é€ å¤§é‡å€Ÿé‰´äº†plasmaå’ŒzkRollupè®¾è®¡ï¼Œå¹¶ä»¥Vitalikæ‰€æè¿°çš„ [shadow chains](https://blog.ethereum.org/2014/09/17/scalability-part-1-building-top/) ä¸ºåŸºç¡€ ã€‚ **æ­¤ç»“æ„ç±»ä¼¼äº[Plasma](https://learnblockchain.cn/tags/Plasma)ï¼Œä½†æ”¾å¼ƒäº†ä¸€äº›æ‰©å±•æ€§ï¼Œä»¥ä¾¿åœ¨äºŒå±‚ç½‘ç»œä¸­è¿è¡Œå®Œå…¨é€šç”¨çš„æ™ºèƒ½åˆçº¦ï¼ˆä¾‹å¦‚Solidityï¼‰ï¼ŒåŒæ—¶è¿˜äº«æœ‰å’Œä¸€å±‚ç½‘ç»œç›¸åŒçš„å®‰å…¨æ€§**ã€‚optimistic rollupçš„å¯æ‰©å±•æ€§ä¸ä¸€å±‚ç½‘ç»œæ•°æ®å¯ç”¨å¸¦å®½æˆæ­£æ¯”ï¼Œä¸€å±‚ç½‘ç»œå¯ä»¥åŒ…æ‹¬Eth1ï¼ŒEth2ï¼Œ ç”šè‡³[Bitcoinç°é‡‘æˆ–ä»¥å¤ªåŠç»å…¸](https://ethresear.ch/t/bitcoin-cash-a-short-term-data-availability-layer-for-ethereum/5735)ï¼Œoptimistic rollupéƒ½å¯ä»¥åœ¨äºŒå±‚ç½‘ç»œä¸Šæä¾›ç±»EVMçš„é“¾ã€‚

> å¤‡æ³¨ï¼šä¸‹æ–‡ä¸­äºŒå±‚ç½‘ç»œå°†ä½¿ç”¨ç®€å†™ L2 ï¼Œç›¸åº”çš„ä»¥å¤ªåŠä¸»ç½‘ï¼ˆæˆ–å…¶ä»–ç½‘ç»œï¼‰ç§°ä¸º L1



![1_qk6yWTozTxMfZXZILtvpAQ](https://img.learnblockchain.cn/pics/20200727225147.png)



# å¿«é€Ÿæ¦‚è¿°

è®©æˆ‘ä»¬å…ˆä»ä¸€äº›ç›´è§‰å¼€å§‹ï¼Œäº†è§£å¦‚ä½•åœ¨ä»¥å¤ªåŠä¸»ç½‘ä¸Šè¿›è¡Œ optimistic rollupï¼Œç„¶åå†æ·±å…¥ç ”ç©¶ã€‚



ä»¥ä¸‹æ˜¯ optimistic rollupæ™ºèƒ½åˆçº¦ï¼ˆåä¸ºFredï¼‰çš„ç”Ÿå‘½å†ç¨‹ï¼š

1. å¼€å‘äººå‘˜ç¼–å†™äº†ä¸€ä¸ªåä¸ºFredçš„Solidityåˆçº¦ã€‚

2. å¼€å‘äººå‘˜å°†äº¤æ˜“åœ¨é“¾ä¸‹å‘é€åˆ°ç»‘å®šçš„**èšåˆå•†(aggregator)**ï¼ˆL2çš„åŒºå—ç”Ÿäº§è€…ï¼‰ï¼Œèšåˆå•†è´Ÿè´£éƒ¨ç½²åˆçº¦ã€‚
   â€” ä»»ä½•æ”¯ä»˜äº†ä¿è¯é‡‘çš„äººéƒ½å¯ä»¥ç§°ä¸ºèšåˆå•†(aggregator)ã€‚
   â€” åŒä¸€æ¡é“¾ä¸Šæœ‰å¤šä¸ªèšåˆå•†ã€‚
   â€” å¯ä»¥æ”¯ä»˜è´¹ç”¨ï¼Œä½†èšåˆå•†éœ€è¦ï¼ˆå¸æˆ·æŠ½è±¡/[å…ƒäº¤æ˜“](https://learnblockchain.cn/article/584)ï¼‰ã€‚
   â€” å¼€å‘äººå‘˜å¯ä»¥å³æ—¶ç¡®è®¤äº¤æ˜“ï¼Œå¦åˆ™èšåˆå•†å°†æŸå¤±ä¿è¯é‡‘ã€‚

3. èšåˆå•†åœ¨æœ¬åœ°å¤„ç†äº¤æ˜“å¹¶è®¡ç®—æ–°çš„çŠ¶æ€æ ¹ã€‚

4. èšåˆå•†æäº¤ä»¥å¤ªåŠäº¤æ˜“(æ”¯ä»˜gasè´¹ç”¨)ï¼Œå…¶ä¸­åŒ…å«äº¤æ˜“å’ŒçŠ¶æ€æ ¹ï¼ˆä¸€ä¸ªoptimistic rollupåŒºå—ï¼‰ã€‚

5. å¦‚æœ**ä»»ä½•äºº**ä¸‹è½½äº†è¯¥å—å¹¶å‘ç°å…¶æ— æ•ˆï¼Œåˆ™å¯ä»¥ä½¿ç”¨`verify_state_transition(prev_state, block, witness)`æ¥è¯æ˜å…¶æ— æ•ˆï¼Œ å°†ï¼š

   â€” åˆ é™¤æ¶æ„èšåˆçš„åŒºå—ä»¥åŠåœ¨æ— æ•ˆå—ä¹‹ä¸Šæ„å»ºçš„ä»»ä½•èšåˆåŒºå—ã€‚
   â€” ç”¨èšåˆå•†çš„éƒ¨åˆ†ä¿è¯é‡‘å¥–åŠ±è¯æ˜è€…ã€‚

6. Fred çŸ¥é“è‡ªå·±çš„éƒ¨ç½²äº¤æ˜“ç°åœ¨å·²æˆä¸ºæ¯ä¸ªæœªæ¥æœ‰æ•ˆçš„optimistic rollupçŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æœ‰å®‰å…¨ä¿éšœã€‚å¯ä»¥å°†Fredçš„ä¸»ç½‘ERC20å‘é€åˆ°L2ä¸­ï¼ å¥½æäº†ï¼

   

ä»…æ­¤è€Œå·²ï¼ ç”¨æˆ·å’Œæ™ºèƒ½åˆçº¦çš„è¡Œä¸ºåº”è¯¥ä¸æˆ‘ä»¬ä»Šå¤©åœ¨ä»¥å¤ªåŠä¸»ç½‘ä¸Šçœ‹åˆ°çš„éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯æ‰©å®¹äº†ï¼ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹è¿™æ•´ä¸ªè¿‡ç¨‹çš„å¯èƒ½æ€§ã€‚



# æ·±å…¥Optimistic Rollup

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰åˆ›å»ºåƒä»¥å¤ªåŠè¿™æ ·çš„æ— è®¸å¯æ™ºèƒ½åˆçº¦å¹³å°çš„å«ä¹‰ã€‚ æ„å»ºè¿™äº›å¯çˆ±çš„çŠ¶æ€æœºä¹‹å¿…é¡»æ»¡è¶³ä¸‰ä¸ªå±æ€§ï¼š

1. **å¯ç”¨çš„ï¼ˆavailabeï¼‰æ€»ä½“çŠ¶æ€** â€” ä»»ä½•ç›¸å…³æ–¹éƒ½å¯ä»¥ä¸‹è½½å½“å‰çš„æ€»ä½“çŠ¶æ€ã€‚
2. **æœ‰æ•ˆçš„ï¼ˆvalidï¼‰æ€»ä½“çŠ¶æ€** â€” æ€»ä½“çŠ¶æ€æ˜¯æœ‰æ•ˆçš„ (ä¾‹å¦‚ï¼šæ²¡æœ‰æ— æ•ˆçš„çŠ¶æ€è½¬æ¢)ã€‚
3. **æ´»è·ƒçš„ï¼ˆliveï¼‰æ€»ä½“çŠ¶æ€** â€” ä»»ä½•æ„Ÿå…´è¶£çš„ä¸€æ–¹éƒ½å¯ä»¥æäº¤è½¬æ¢æ€»ä½“çŠ¶æ€çš„äº¤æ˜“ã€‚

>  è¯‘è€…æ³¨ï¼šæ€»ä½“çŠ¶æ€å¯¹åº”çš„åŸæ–‡æ˜¯ head stateï¼Œ ç›´è¯‘æˆ–è®¸æ˜¯å¤´éƒ¨çŠ¶æ€ï¼Œ ä¸è¿‡ä¸­æ–‡é‡Œè²Œä¼¼æ²¡æœ‰è¿™ä¸ªè¯´æ³•ã€‚



æ‚¨ä¼šæ³¨æ„åˆ°ä»¥å¤ªåŠL1æ»¡è¶³äº†è¿™ä¸‰ä¸ªå±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬ç›¸ä¿¡ï¼š

1. çŸ¿å·¥ä¸ä¼šåœ¨ä¸å¯ç”¨çš„åŒºå—ä¸Šè¿›è¡ŒæŒ–çŸ¿;

2. çŸ¿å·¥ä¸ä¼šåœ¨æ— æ•ˆçš„åŒºå—ä¸Šè¿›è¡ŒæŒ–çŸ¿[*](https://eprint.iacr.org/2015/702.pdf)ï¼›

3. å¹¶éæ‰€æœ‰çŸ¿å·¥éƒ½ä¼šå®¡æŸ¥äº¤æ˜“ã€‚

   

ä½†æ˜¯ï¼Œä»¥å¤ªåŠç›®å‰æ— æ³•æ‰©å®¹ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¸€äº›ç±»ä¼¼çš„å®‰å…¨å‡è®¾ä¸‹ï¼Œoptimistic rollup å¯ä»¥å¤§è§„æ¨¡æ‰©å®¹ä¸‹ï¼Œæä¾›è¿™ä¸‰ä¸ªä¿è¯ã€‚ ä¸ºäº†äº†è§£æ„é€ å’Œå®‰å…¨æ€§çš„å‡è®¾ï¼Œå°†é€ä¸€æ£€æŸ¥æˆ‘ä»¬å¸Œæœ›åˆ†åˆ«ç¡®ä¿çš„æ¯ä¸ªå±æ€§ã€‚



# #1: å¯ç”¨çš„æ€»ä½“çŠ¶æ€



Optimistic rollup ä½¿ç”¨ç»å…¸ rollupæŠ€æœ¯ï¼ˆ[æ­¤å¤„æ¦‚è¿°](https://ethresear.ch/t/on-chain-scaling-to-potentially-500-tx-sec-through-mass-tx-validation/3477)ï¼‰æ¥ç¡®ä¿å½“å‰çŠ¶æ€æ•°æ®çš„å¯ç”¨æ€§ã€‚è¯¥æŠ€æœ¯å¾ˆç®€å•-åŒºå—ç”Ÿäº§è€…ï¼ˆç§°ä¸ºèšåˆå•†ï¼‰é€šè¿‡ä»¥å¤ªåŠä¸»ç½‘ä¸Šçš„calldataï¼ˆè°ƒç”¨ä»¥å¤ªåŠå‡½æ•°çš„è¾“å…¥å‚æ•°ï¼‰ä¼ é€’æ‰€æœ‰åŒºå—çš„äº¤æ˜“å’ŒçŠ¶æ€æ ¹ã€‚calldataæ•°æ®å°†é»˜å…‹å°”åŒ–æ¥å¹¶å­˜å‚¨ä¸€ä¸ª32å­—èŠ‚çš„çŠ¶æ€æ ¹ã€‚æç¤ºï¼šcalldataä¸ºæ¯32å­—èŠ‚2,000 gasï¼Œè€Œå­˜å‚¨æˆæœ¬ä¸º20,000 gasã€‚æ­¤å¤–ï¼Œåœ¨[ä¼Šæ–¯å¦å¸ƒå°”ç¡¬åˆ†å‰](https://learnblockchain.cn/2019/11/21/istanbul-update)ä¸­ï¼Œcalldataçš„gasæˆæœ¬é™ä½äº†è¿‘5å€ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨é™¤ä»¥å¤ªåŠä¸»ç½‘ä¹‹å¤–çš„å…¶ä»–ç½‘ç»œä½œä¸ºL1æä¾›æ•°æ®å¯ç”¨æ€§ï¼ŒåŒ…æ‹¬ [Bitcoin Cash](https://ethresear.ch/t/bitcoin-cash-a-short-term-data-availability-layer-for-ethereum/5735) å’Œ[Eth2]([https://learnblockchain.cn/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A2.0](https://learnblockchain.cn/tags/ä»¥å¤ªåŠ2.0))ã€‚åœ¨Eth2é˜¶æ®µ1ä¸­ï¼Œæ‰€æœ‰åˆ†ç‰‡éƒ½å¯ä»¥ä½œä¸ºL1æä¾›æ•°æ®å¯ç”¨æ€§ï¼Œä»¥åˆ†ç‰‡æ•°é‡çº¿æ€§åœ°æ‰©å®¹TPSã€‚è¿™æ ·çš„ååé‡æ˜¯è¶³å¤Ÿçš„ï¼Œç›´åˆ°é‡åˆ°å…¶ä»–å¯æ‰©å±•æ€§ç“¶é¢ˆï¼ˆä¾‹å¦‚çŠ¶æ€è®¡ç®—ï¼‰ã€‚



## å®‰å…¨å‡è®¾

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ä»¥å¤ªåŠä¸»ç½‘ä¸Šå¤šæ•°æ˜¯è¯šå®çš„ã€‚ å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Eth2ã€ETCæˆ–Bitcoin Cashï¼Œæˆ‘ä»¬ä¹Ÿå°†ç±»ä¼¼å‡è®¾ã€‚



> åœ¨è¿™äº›å‡è®¾ä¸‹ï¼Œä½¿ç”¨å¯ä¿¡çš„L1æ¥å‘å¸ƒæ‰€æœ‰äº¤æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿ä»»ä½•äººéƒ½å¯ä»¥è®¡ç®—å½“å‰çš„æ€»ä½“çŠ¶æ€ï¼Œä»è€Œæ»¡è¶³å±æ€§1ã€‚

# #2: æœ‰æ•ˆçš„æ€»ä½“çŠ¶æ€

æˆ‘ä»¬éœ€è¦ç¡®ä¿çš„ç¬¬äºŒä¸ªå±æ€§æ˜¯æœ‰æ•ˆçš„æ€»ä½“çŠ¶æ€ã€‚ åœ¨zkRollupä¸­ï¼Œä½¿ç”¨é›¶çŸ¥è¯†è¯æ˜æ¥ç¡®ä¿æœ‰æ•ˆæ€§ã€‚ ä»é•¿è¿œæ¥çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆï¼Œä½†ç›®å‰æ— æ³•ä¸ºä»»æ„çŠ¶æ€è½¬æ¢åˆ›å»ºæœ‰æ•ˆçš„zkProofsã€‚ ä½†æ˜¯ï¼Œä»ç„¶æœ‰å¸Œæœ›ä½¿ç”¨é€šç”¨çš„EVMå‹çŠ¶æ€æœºï¼ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨plasma/[truebit](https://learnblockchain.cn/tags/TrueBit)ç±»ä¼¼çš„åŠ å¯†ç»æµå­¦è¿›è¡Œæœ‰æ•ˆæ€§åšå¼ˆã€‚

## å¯†ç ç»æµå­¦æœ‰æ•ˆæ€§åšå¼ˆ

ä»è¾ƒé«˜å±‚æ¬¡æ¥çœ‹ï¼ŒåŒºå—æäº¤å’Œæœ‰æ•ˆæ€§åšå¼ˆè§„åˆ™å¦‚ä¸‹ï¼š

1. èšåˆå•†æäº¤ä¿è¯é‡‘æ‰èƒ½å¼€å§‹ç”Ÿäº§åŒºå—ã€‚
2. æ¯ä¸ªåŒºå—åŒ…å« `[access_list, transactions, post_state_root]`.
3. æœ‰ä¿è¯é‡‘çš„èšåˆå•†å°†æŒ‰ç…§â€œå…ˆåˆ°å…ˆå¾—â€çš„åŸåˆ™ï¼ˆæˆ–æ ¹æ®éœ€è¦ä½¿ç”¨è½®æµæ–¹å¼ï¼‰å°†æ‰€æœ‰åŒºå—æäº¤åˆ°`ROLLUP_CHAIN`åˆçº¦ã€‚
4. **ä»»ä½•äºº**éƒ½å¯èƒ½è¯æ˜è¯¥åŒºå—æ— æ•ˆï¼Œ**å¹¶èµ¢å¾—äº†èšåˆå•†çš„éƒ¨åˆ†ä¿è¯é‡‘**ã€‚



è¦è¯æ˜ä¸€ä¸ªå—æ— æ•ˆï¼Œå¿…é¡»è¯æ˜ä»¥ä¸‹ä¸‰ä¸ªå±æ€§ä¹‹ä¸€ï¼š


1. INVALID_BLOCK: æäº¤çš„å—æ˜¯æ— æ•ˆã€‚
   è¿™æ˜¯é€šè¿‡`is_valid_transition(prev_state, block, witness) => boolean`è®¡ç®—çš„ã€‚
2. SKIPPED_VALID_BLOCK: æäº¤çš„å—â€œå¿½ç•¥â€äº†ä¸€ä¸ªæœ‰æ•ˆå—ã€‚
3. INVALID_PARENT: æäº¤çš„å—çš„çˆ¶å—æ˜¯æ— æ•ˆçš„ã€‚



è¿™ä¸‰ä¸ªçŠ¶æ€è½¬æ¢æœ‰æ•ˆæ€§æ¡ä»¶å¦‚å›¾æ‰€ç¤ºï¼š

![1_cv_RR7vxY0BW89QKr7mRsA](https://img.learnblockchain.cn/pics/20200727225247.png)



è¯¥çŠ¶æ€æœ‰æ•ˆæ€§åšå¼ˆå…·æœ‰ä¸€äº›æœ‰è¶£çš„å±æ€§ï¼š



1. **å¯æ’æ‹”çš„æœ‰æ•ˆæ€§æ£€æŸ¥å™¨**: æˆ‘ä»¬å¯ä»¥ä¸º`is_valid_transition(â€¦)`å®šä¹‰ä¸åŒçš„æœ‰æ•ˆæ€§æ£€æŸ¥å™¨ï¼Œä»è€Œå…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„VMï¼ˆåŒ…æ‹¬EVMå’ŒWASMåœ¨å†…ï¼‰æ¥è¿è¡Œæ™ºèƒ½åˆçº¦ã€‚
2. **ä»…æœ‰ä¸€æ¡æœ‰æ•ˆé“¾**: æäº¤åˆ°ä»¥å¤ªåŠçš„åŒºå—ï¼Œå¯ä»¥ç¡®å®šäº¤æ˜“å’ŒåŒºå—çš„æ€»é¡ºåºã€‚ è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿç¡®å®šæ€§åœ°ç¡®å®šâ€œå¤´(head)â€å—ï¼Œä»è€Œè¦æ±‚èšåˆå•†åœ¨æäº¤æ–°å—ä¹‹å‰åˆ å‡æ— æ•ˆçš„å—ã€‚
3. **éƒ¨åˆ†éªŒè¯**: æ­¤æœ‰æ•ˆæ€§åšå¼ˆå¯ä»¥ä»¥å•ä¸ªUTXOä¸ºåŸºç¡€è¿›è¡Œã€‚æ–¹æ¡ˆä½¿ç”¨éƒ¨åˆ†æ— æ•ˆå–ä»£å…¨éƒ¨åŒºå—æ•´ä½“æ— æ•ˆ -- è¿™ç±»ä¼¼äºPlasma Cashã€‚ è¯·æ³¨æ„ï¼Œå¹¶ä¸éœ€è¦è¯æ˜ä¸€ä¸ªå—çš„æ‰€æœ‰æ— æ•ˆè½¬æ¢ã€‚ éƒ¨åˆ†åŒºå—æ— æ•ˆéªŒè¯æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åªéªŒè¯æˆ‘ä»¬å…³å¿ƒçš„çŠ¶æ€ï¼Œ ä»¥ç¡®ä¿å®‰å…¨ã€‚ è¦äº†è§£æœ‰å…³UTXOå¦‚ä½•å®ç°å¹¶è¡Œæ€§è¯·æŸ¥çœ‹[Cryptoeconomics.studyè§†é¢‘](https://www.youtube.com/watch?v=-xoCoZGJ9AQ)ï¼

## æœ‰å…³ç­æœ›å¡”

>  è¯‘è€…æ³¨ï¼šç­æœ›å¡”æ˜¯ä¸€ä¸ªå¸®åŠ©ç”¨æˆ·ç›‘è§†äº¤æ˜“æ¬ºè¯ˆçš„å®ä½“ï¼Œå› ä¸ºæ™®é€šç”¨æˆ·å¾ˆéš¾å®æ—¶åœ¨çº¿ï¼Œç­æœ›å¡”åˆ™å¯ä»¥å……å½“ç”¨æˆ·çš„ä»£ç†ã€‚



é‡‡ç”¨L2çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯[ç­æœ›å¡”](https://blockonomi.com/watchtowers-bitcoin-lightning-network/)çš„å¤æ‚æ€§ã€‚ ä¸ç”¨æˆ·ç­¾çº¦çš„ç­æœ›å¡”ï¼Œæ˜¯å¦ä¸€ä¸ªåŠ å…¥çš„æ¥ç®¡ç†å·²ç»å¤æ‚çš„ç³»ç»Ÿå®ä½“ã€‚ å¹¸è¿çš„æ˜¯ï¼Œoptimistic rollup åŠ å¯†ç»æµæœ‰æ•ˆæ€§åšå¼ˆè‡ªç„¶åœ°æ¿€åŠ±äº†ç­æœ›å¡”ï¼ æ‰€æœ‰æ•°æ®éƒ½æ˜¯å¯ç”¨çš„ï¼Œå› æ­¤ä»»ä½•äººéƒ½å¯ä»¥è¿è¡Œå…¨èŠ‚ç‚¹éªŒè¯æ— æ•ˆäº¤æ˜“ä»¥è·å¾—â€œæ‰€æœ‰â€æ„å»ºæ— æ•ˆé“¾çš„èšåˆå•†çš„ä¿è¯é‡‘ã€‚ è¿™ç§é£é™©æ¿€åŠ±å°†ä¿ƒä½¿èšåˆå•†æˆä¸ºç­æœ›å¡”ï¼Œä»è€ŒéªŒè¯ä»–ä»¬å»ºç«‹çš„é“¾ï¼Œä»è€Œå‡è½»äº†éªŒè¯è€…çš„å›°å¢ƒã€‚



## æœ‰å…³Plasma

è®¸å¤šplasmaæ„é€ ä¹Ÿä¾èµ–äºåŠ å¯†ç»æµå­¦çš„æœ‰æ•ˆæ€§åšå¼ˆã€‚ ä½†æ˜¯ï¼Œåœ¨æ²¡æœ‰zkProofsæˆ–æ•°æ®åŠ«æŒæ”»å‡»çš„[æ¸”å¤«åšå¼ˆ](https://github.com/ethereum/research/wiki/A-note-on-data-availability-and-erasure-coding#what-is-the-data-availability-problem)ï¼ˆæ•°æ®å¯ç”¨æ€§é—®é¢˜ï¼‰æƒ…å†µä¸‹ï¼Œåœ¨plasmaä¸­æ‰§è¡Œåˆçº¦è‡ªæ²»æ˜¯ä¸å¯èƒ½çš„ã€‚ å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œrollup é€šè¿‡å‘å¸ƒè®¡ç®—é“¾ä¸ŠçŠ¶æ€è½¬æ¢æ‰€éœ€çš„æœ€å°‘ä¿¡æ¯æ¥è§£å†³æ•°æ®å¯ç”¨æ€§é—®é¢˜ã€‚ ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ‰©å®¹åˆ°æ¯ç§’æ•°åä¸‡ï¼ˆç”šè‡³æ›´å¤šï¼‰çš„äº¤æ˜“ plasma ä»ç„¶æ˜¯è‡³å…³é‡è¦ï¼Œä½†æ˜¯è¿™æ˜¯è¿œæœŸçš„éœ€è¦ï¼Œä½†å¯¹äºè®¸å¤šæ™ºèƒ½åˆçº¦è€Œè¨€ï¼Œä»ä¸­æœŸæ¥çœ‹å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚



## å®‰å…¨å‡è®¾

1. åŠ å¯†ç»æµå­¦æœ‰æ•ˆæ€§åšå¼ˆæ˜¯åŸºäº**è¯šå®ç”šè‡³ç†æ€§çš„éªŒè¯è€…**å‡è®¾ä¸‹å·¥ä½œçš„ã€‚ æˆ‘ä»¬å¯ä»¥è¯´ä»–æ˜¯â€œç†æ€§â€çš„éªŒè¯è€…ï¼Œè€Œä¸æ˜¯â€œè¯šå®â€çš„éªŒè¯è€…ï¼Œå› ä¸ºæŒ‘æˆ˜åšå¼ˆå¯èƒ½ä¼šä»ç»æµä¸Šæ¿€åŠ±ä»–ä»¬ã€‚

2. å¦å¤–ï¼Œæˆ‘ä»¬å‡è®¾ä¸»ç½‘æ˜¯**æ´»è·ƒçš„**ï¼Œè¿™æ„å‘³ç€å®ƒä¸ä¼šå®¡æŸ¥æ‰€æœ‰è¯•å›¾è¯æ˜æ— æ•ˆçš„äº¤æ˜“ï¼ˆè¯‘è€…æ³¨ï¼š**å®¡æŸ¥æ„å‘³ç€å¹²é¢„**ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯æŒ‡ï¼šè¯æ˜æ— æ•ˆçš„äº¤æ˜“å¹¶ä¸ä¼šé€‰æ‹©æ€§çš„å¹²é¢„ï¼Œä¾‹å¦‚å¦‚ä¸¢å¼ƒè¯¥äº¤æ˜“ï¼‰ã€‚ è¯·æ³¨æ„ï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œèšåˆå•†çš„è§£é™¤ä¿è¯é‡‘é€€å‡ºæœŸé™æ˜¯ä¸»ç½‘ä¸Šçš„æ´»è·ƒæ€§å‡è®¾ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦1ä¸ªæœˆçš„ä¿è¯é‡‘é€€å‡ºæœŸé™ï¼Œéœ€è¦åœ¨è¯¥æœˆå†…è¯æ˜æäº¤æ— æ•ˆæ€§è¯æ˜ï¼Œæ‰èƒ½ç½šæ²¡ä¿è¯é‡‘ï¼‰ã€‚

   

> åœ¨è¿™äº›å‡è®¾ä¸‹ï¼Œæ‰€æœ‰æ— æ•ˆå—æˆ–çŠ¶æ€è½¬æ¢éƒ½å°†è¢«ä¸¢å¼ƒï¼Œä»è€Œä½¿æˆ‘ä»¬è·å¾—ä¸€ä¸ªæœ‰æ•ˆæ€»ä½“çŠ¶æ€ï¼Œå¹¶æ»¡è¶³å±æ€§ #2ã€‚

# #3: æ´»è·ƒçš„æ€»ä½“çŠ¶æ€

æˆ‘ä»¬å¿…é¡»æ»¡è¶³çš„æœ€ç»ˆå±æ€§æ˜¯æ´»è·ƒï¼Œé€šå¸¸è¢«ç§°ä¸ºæŠ—å®¡æŸ¥èƒ½åŠ›ã€‚ ç¡®ä¿è¿™ä¸€ç‚¹çš„å…³é”®æ˜¯ï¼š



1. ä¿è¯é‡‘å¤§å°è¶…è¿‡`MINIMUM_BOND_SIZE`çš„ä»»ä½•äººéƒ½å¯èƒ½æˆä¸ºåŒä¸€rollupé“¾çš„èšåˆå•†ã€‚

2. ç”±äºè¯šå®çš„èšåˆå•†å¯èƒ½ä¼šç§»é™¤æ— æ•ˆçš„å—ï¼Œå› æ­¤å³ä¾¿äº§ç”Ÿäº†æ— æ•ˆåŒºå—ï¼Œé“¾ä¹Ÿ**ä¸ä¼šåœæ­¢**ã€‚

   

æœ‰äº†è¿™ä¸¤ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¿æŒæ´»è·ƒï¼è¯šå®çš„èšåˆå•†å¯èƒ½æ€»æ˜¯é¿å…æäº¤æ— æ•ˆåŒºå—ï¼Œå› æ­¤ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªéå®¡æŸ¥æ€§èšåˆå•†ï¼Œä½ çš„äº¤æ˜“æœ€ç»ˆä¹Ÿä¼šå¾—åˆ°ç¡®å®šï¼Œè¿™ä¸ä¸»ç½‘ç±»ä¼¼ã€‚



## æœ‰å…³æ´»è·ƒä¸å³æ—¶ç¡®è®¤



æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ä¸€ä¸ªå±æ€§æ˜¯å³æ—¶ç¡®è®¤ã€‚ è¿™æ ·å°±å¯ä»¥ä¸ºç”¨æˆ·æä¾›äºšç§’çº§çš„åé¦ˆï¼Œè¡¨æ˜ä»–ä»¬çš„äº¤æ˜“å°†è¢«å¤„ç†ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å—ä¸ŠæŒ‡å®šèšåˆå™¨çŸ­æ—¶çš„å„æ–­å‡ºå—æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚ ç¼ºç‚¹æ˜¯ï¼Œå®ƒé™ä½äº†æŠ—å®¡æŸ¥èƒ½åŠ›ï¼Œå› ä¸ºç°åœ¨ä¸€ä¸ªå‚ä¸æ–¹ä¸€æ®µæ—¶é—´å†…å…·å¤‡äº†å®¡æŸ¥ã€‚ å¾ˆæƒ³å¬å¬æœ‰å…³æ­¤æƒè¡¡çš„ä»»ä½•ç ”ç©¶ï¼



## å®‰å…¨å‡è®¾

ä¿æŒæ´»è·ƒåŸºäºä¸¤ä¸ªå®‰å…¨æ€§å‡è®¾ï¼š

1. å­˜åœ¨ä¸€ä¸ªéå®¡æŸ¥èšåˆå•†ã€‚
2. ä»¥å¤ªåŠä¸»ç½‘æ˜¯éå®¡æŸ¥çš„

> åœ¨è¿™äº›å‡è®¾ä¸‹ï¼Œoptimistic rollup é“¾å°†èƒ½å¤ŸåŸºäºä»»ä½•æœ‰æ•ˆçš„ç”¨æˆ·äº¤æ˜“æ¥è¿›åŒ–å’Œå˜æ›´æ€»ä½“çŠ¶æ€ ï¼ˆæ»¡è¶³å±æ€§#3ï¼‰ã€‚



ç°åœ¨ï¼Œè¿™ä¸‰ä¸ªå±æ€§å‡å·²æ»¡è¶³ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨ä»¥å¤ªåŠL2ä¸­æä¾›äº†ä¸€ä¸ªæ— è®¸å¯çš„æ™ºèƒ½åˆçº¦å¹³å°ï¼



# å¯æ‰©å±•æ€§æŒ‡æ ‡

ä»¥ä¸‹ä¼°ç®—æ˜¯**å®Œå…¨åŸºäºæ•°æ®å¯ç”¨æ€§ **ã€‚ å®é™…ä¸Šï¼Œå¯èƒ½ä¼šé‡åˆ°å…¶ä»–ç“¶é¢ˆï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯çŠ¶æ€è®¡ç®—ã€‚ ä½†æ˜¯ï¼Œè¿™ç¡®å®æä¾›äº†å¯ç”¨çš„ä¸Šé™ã€‚



## åœ¨ETH1æ•°æ®å¯ç”¨æ€§ä¸‹çš„ERC20 è½¬è´¦

è®¡ç®—åŸºäº [ä¸€ä¸ªç®€å•çš„ call-data è®¡ç®— python è„šæœ¬](https://gist.github.com/karlfloersch/1bf6ab7871f41e3a5a921c0a007ad5c6).



è¯·æ³¨æ„ï¼Œè¿™äº› ERC20 è½¬è´¦å¯¹calldata è¿›è¡Œäº†ä¼˜åŒ–ã€‚ å¦å¤–è¯·æ³¨æ„ï¼ŒOptimistic Rollup çš„å¥½å¤„æ˜¯æˆ‘ä»¬ä¸ä»…é™äºERC20ä¼ è¾“ï¼



**ECDSA ç­¾å**
~100 TPSï¼š æœªé‡‡ç”¨ EIP 2028 æ—¶
~450 TPSï¼š é‡‡ç”¨ EIP 2028 å ( 2019å¹´ 10 æœˆå·²ç»å¾ˆåˆ°ä¸»ç½‘)

**BLS ç­¾å / SNARK-ed ç­¾å**
~400 TPS ï¼š æœªé‡‡ç”¨ EIP 2028 æ—¶
~2000 TPS ï¼š é‡‡ç”¨ EIP 2028 å ( 2019å¹´ 10 æœˆå·²ç»å¾ˆåˆ°ä¸»ç½‘)

## åœ¨å…¶ä»–çš„æ•°æ®å¯ç”¨æ€§ä¸‹ï¼ˆ å¦‚ ETH2, Bitcoin Cash)



**ä¸L1å¯ä»¥å¤„ç†çš„ååé‡çš„æ•°é‡æˆçº¿æ€§å…³ç³»**ã€‚

è¶…è¿‡2000 TPSï¼



# Optimistic Rollup ä¸ Plasma

Optimistic Rollupä¸Plasmaæœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚ ä¸¤è€…éƒ½ä½¿ç”¨èšåˆå•†é€šè¿‡åŠ å¯†ç»æµæœ‰æ•ˆæ€§åšå¼ˆæ¥ç¡®ä¿å®‰å…¨æ€§ï¼Œä»è€Œåœ¨ä¸»ç½‘ä¸Šæäº¤åŒºå—ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯æ˜¯å¦å…·æœ‰ç¡®ä¿åŒºå—å¯ç”¨çš„å¯ç”¨æ€§æ”¶æ®ã€‚



![1_XM9jBBbYE20kFC7PIngipA](https://img.learnblockchain.cn/pics/20200727225426.png)



ä¸¤ç§è§£å†³æ–¹æ¡ˆä¹‹é—´çš„ç›¸ä¼¼ä¹‹å¤„ä½¿å¾—ä¸¤è€…ä¹‹é—´å¯ä»¥å…±äº«è®¸å¤šåŸºç¡€æ¶æ„å’Œä»£ç ã€‚ åœ¨æˆç†Ÿçš„L2ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½ä¼šçœ‹åˆ°rollupï¼Œplasmaå’Œ[çŠ¶æ€é€šé“](https://learnblockchain.cn/tags/%E7%8A%B6%E6%80%81%E9%80%9A%E9%81%93)åœ¨åŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆæ™ºèƒ½é’±åŒ…ï¼‰ä¸­ä¸€èµ·å·¥ä½œã€‚ å“¦ï¼Œæˆ‘æ˜¯å¦æåˆ°è¿‡[OVM]ï¼ˆhttps://medium.com/plasma-group/introducing-the-ovm-db253287af50ï¼‰ï¼Ÿ ğŸ˜



# Yay Optimistic Rollup ğŸ‰



Optimistic Rollupä¼šåœ¨L2ä¸­å æ®ä¸€å¸­ä¹‹åœ°ã€‚ å®ƒåœ¨é€šç”¨æ™ºèƒ½åˆçº¦å¹³å°ï¼Œç®€å•æ€§ï¼Œå®‰å…¨æ€§å’Œæ‰©å±•æ€§ä¹‹é—´åšäº†ä¸€äº›æƒè¡¡ã€‚ å†åŠ ä¸Šå…¶èƒ½å¤Ÿå®‰å…¨çš„è¿è¡Œæ™ºèƒ½åˆçº¦ï¼Œæ„å‘³ç€å®ƒç”šè‡³å¯ä»¥ç”¨äºè£å®šå…¶ä»–ç¬¬äºŒå±‚è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚Plasmaå’ŒçŠ¶æ€é€šé“ï¼



> å°±æŠŠå®ƒç§°ä¸ºäºŒä»£ L2 ä¸­çš„ L1 å§ã€‚



æ— è®ºå¦‚ä½•ï¼Œç ”ç©¶å·²ç»å¤Ÿäº†ï¼Œæ˜¯æ—¶å€™å®æ–½å¼ºå¤§ï¼Œå…¨é¢ä¸”ç”¨æˆ·å‹å¥½çš„ä»¥å¤ªåŠç¬¬2å±‚äº†ï¼ ğŸ˜



---

*ç‰¹åˆ«æ„Ÿè°¢Vitalik Buterinä¸æˆ‘ä¸€èµ·è§£å†³è¿™äº›æƒ³æ³•å¹¶æå‡ºäº†å¾ˆå¤šå»ºè®®*ã€‚

æ­¤å¤–ï¼Œè¿˜è¦æ„Ÿè°¢Ben Jonesæ‰€åšçš„å¤§éƒ¨åˆ†å·¥ä½œä»¥åŠJinglan Wangï¼ŒKevin Ho å’ŒJesse Walden çš„ç¼–è¾‘ã€‚

**æ›´æ–°**ï¼šJohn Adler åœ¨ä»–çš„ã€Šåˆå¹¶å…±è¯†ã€‹ä¸­çš„æ–‡ç« ä¸optimistic rollups è¿›è¡Œäº†å¯¹æ¯”åˆ†æï¼Œå‚è€ƒ[æ­¤å¤„](https://ethresear.ch/t/minimal-viable-merged-consensus/5617),å¦å¤–ï¼Œ[æ­¤ææ¡ˆ](https://ethresear.ch/t/multi-threaded-data-availability-on-eth-1/5899)å¯ä»¥æé«˜ ETH1 çš„æ•°æ®å¯ç”¨æ€§ - æ›´å¤šçš„ TPSï¼

[Plasma Group Blog]ï¼ˆhttps://medium.com/plasma-group?source=post_sidebar--------------------------post_sidebar-ï¼‰



åŸæ–‡: https://medium.com/plasma-group/ethereum-smart-contracts-in-l2-optimistic-rollup-2c1cef2ec537

ä½œè€…: [Karl Floersch](https://medium.com/@karl_dot_tech?source=post_page-----2c1cef2ec537----------------------)