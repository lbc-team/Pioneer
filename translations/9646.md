
>- åŸæ–‡é“¾æ¥ï¼šhttps://coinsbench.com/master-solidity-must-know-interview-questions-for-ethereum-developers-%EF%B8%8F-practical-only-00cc15a9b9bf
>- è¯‘è€…ï¼š[AIç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œæ ¡å¯¹ï¼š[ç¿»è¯‘å°ç»„](https://learnblockchain.cn/people/412)
>- æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[learnblockchain.cn/articleâ€¦](https://learnblockchain.cn/article/9646)
    
 ## ä»‹ç»

åœ¨ä»¥å¤ªåŠå¼€å‘çš„åŠ¨æ€é¢†åŸŸä¸­ï¼ŒSolidity ä¸“ä¸šçŸ¥è¯†è‡³å…³é‡è¦ã€‚Solidity å¼€å‘äººå‘˜çš„é¢è¯•é€šå¸¸åŒ…æ‹¬å®é™…çš„ç¼–ç æŒ‘æˆ˜ï¼Œä»¥è¯„ä¼°å€™é€‰äººè§£å†³ç°å®é—®é¢˜çš„èƒ½åŠ›ã€‚æœ¬æ–‡æä¾›äº†ä¸€ä¸ªå…¨é¢çš„æŒ‡å—ï¼Œæ¶µç›–äº†é‡è¦çš„é¢è¯•é—®é¢˜ï¼Œé™„æœ‰ Solidity 0.8.18 çš„ç¤ºä¾‹ä»£ç ã€ç°å®åœºæ™¯ã€å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µã€‚

## ç®€å•é—®é¢˜

## 1\. ğŸ”„ `transfer` å’Œ `send` çš„åŒºåˆ«

**é—®é¢˜ï¼š** æ¼”ç¤º Solidity ä¸­ `transfer` å’Œ `send` å‡½æ•°çš„åŒºåˆ«ã€‚

```solidity
pragma solidity ^0.8.18;

contract TransferSendDemo {  
    address payable public recipient = payable(address(0x123));

    function transferFunds() public payable {  
        recipient.transfer(msg.value);  
    }

    function sendFunds() public payable {  
        bool sent = recipient.send(msg.value);  
        require(sent, "Failed to send Ether");  
    }  
}
```

**è§£é‡Šï¼š**

*   `transfer` å¦‚æœè½¬è´¦å¤±è´¥ä¼šå›æ»šï¼Œè½¬å‘ 2300 gasï¼Œè¶³ä»¥å®Œæˆå¤§å¤šæ•°åŸºæœ¬æ“ä½œï¼Œä½†å¦‚æœæ¥æ”¶åˆçº¦è¾ƒå¤æ‚å¯èƒ½ä¼šå¤±è´¥ã€‚
*   `send` è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼è¡¨ç¤ºæˆåŠŸæˆ–å¤±è´¥ï¼Œä¹Ÿè½¬å‘ 2300 gasï¼Œä¸ä¼šå›æ»šã€‚å®ƒä¸å¤ªå®‰å…¨ï¼Œä½†å¯ä»¥ç”¨äºæ¡ä»¶é€»è¾‘ã€‚

**ç°å®åœºæ™¯ï¼š**

*   å¯¹äºç®€å•äº¤æ˜“ä½¿ç”¨ `transfer`ã€‚å¦‚æœä¸å¯èƒ½æ¶ˆè€—æ›´å¤š gas çš„åˆçº¦äº¤äº’ï¼Œä¼˜å…ˆä½¿ç”¨å¸¦æœ‰é€‚å½“æ£€æŸ¥çš„ `send`ã€‚

**é™·é˜±ï¼š**

*   é¿å…åœ¨æ²¡æœ‰æ­£ç¡®å¤„ç†å¤±è´¥æƒ…å†µçš„æƒ…å†µä¸‹ä½¿ç”¨ `send`ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šé™é»˜å¤±è´¥ã€‚

## 2\. ğŸŒ€ é«˜æ•ˆçš„ `for` å¾ªç¯

**é—®é¢˜ï¼š** åœ¨ Solidity ä¸­ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ `for` å¾ªç¯ã€‚

```solidity
pragma solidity ^0.8.18;

contract EfficientLoop {  
    uint256[] public numbers;

    function addNumbers(uint256 _count) public {  
        for (uint256 i = 0; i < _count; i++) {  
            numbers.push(i);  
        }  
    }  
}
```

**è§£é‡Šï¼š**

*   ç¡®ä¿å¾ªç¯ç»è¿‡ä¼˜åŒ–ï¼Œé¿å…è¿‡å¤šçš„è¿­ä»£å¯¼è‡´è¶…å‡º gas é”™è¯¯ã€‚ä½¿ç”¨è¾ƒå°çš„å¾ªç¯å’Œæ‰¹å¤„ç†æ“ä½œå¯ä»¥èŠ‚çœ gasã€‚

**ç°å®åœºæ™¯ï¼š**

*   å¯¹äºéœ€è¦éå†å¤§é‡æ•°æ®é›†çš„åˆçº¦å‡½æ•°ï¼Œè€ƒè™‘ä½¿ç”¨é“¾ä¸‹å¤„ç†æˆ–ä¼˜åŒ–å¾ªç¯ä»¥é¿å…é«˜ gas æˆæœ¬ã€‚

**é™·é˜±ï¼š**

*   å¤§å‹å¾ªç¯å¯èƒ½å¯¼è‡´é«˜ gas æˆæœ¬å’Œäº¤æ˜“å¤±è´¥ã€‚å§‹ç»ˆä½¿ç”¨ä¸åŒçš„è¾“å…¥å¤§å°è¿›è¡Œæµ‹è¯•ã€‚

## 3\. ğŸ” ä»£ç†åˆçº¦ä¸­çš„å­˜å‚¨å†²çª

**é—®é¢˜ï¼š** è§£é‡Šä»£ç†åˆçº¦ä¸­çš„å­˜å‚¨å†²çªå¹¶ç”¨ç¤ºä¾‹æ¼”ç¤ºã€‚

```solidity
pragma solidity ^0.8.18;

contract Proxy {  
    address public implementation;

    function setImplementation(address _impl) public {  
        implementation = _impl;  
    }

    fallback() external payable {  
        (bool success, ) = implementation.delegatecall(msg.data);  
        require(success, "Delegatecall failed");  
    }  
}

contract ImplementationV1 {  
    uint256 public value;  
}

contract ImplementationV2 {  
    uint256 public newValue;   
}
```

**è§£é‡Šï¼š**

*   å­˜å‚¨å†²çªå‘ç”Ÿåœ¨ä¸åŒçš„å®ç°æœ‰é‡å çš„å­˜å‚¨å¸ƒå±€æ—¶ã€‚ç¡®ä¿å¯å‡çº§åˆçº¦ä»”ç»†ç®¡ç†å­˜å‚¨æ§½ã€‚

**ç°å®åœºæ™¯ï¼š**

*   åœ¨è®¾è®¡å¯å‡çº§åˆçº¦æ—¶ä½¿ç”¨æ¸…æ™°ä¸”ä¸€è‡´çš„å­˜å‚¨å¸ƒå±€ã€‚è€ƒè™‘ä½¿ç”¨åº“æ¥é¿å…å†²çªã€‚

**é™·é˜±ï¼š**

*   æ„å¤–è¦†ç›–å­˜å‚¨æ§½å¯èƒ½ä¼šç ´ååˆçº¦çŠ¶æ€ã€‚ä½¿ç”¨åƒ OpenZeppelin çš„å¯å‡çº§åˆçº¦è¿™æ ·çš„å·¥å…·æ¥é™ä½é£é™©ã€‚

## ä¸­ç­‰é—®é¢˜

## 4\. ğŸ“Š å­˜å‚¨ä¸å†…å­˜ä¸­çš„æ•°ç»„å¤„ç†

**é—®é¢˜ï¼š** å­˜å‚¨ä¸å†…å­˜ä¸­çš„æ•°ç»„åœ¨å­˜å‚¨æ§½ä½¿ç”¨ä¸Šæœ‰ä½•ä¸åŒï¼Ÿ

```solidity
pragma solidity ^0.8.18;

contract ArrayDemo {  
    uint64[] public storageArray = [1, 2, 3, 4, 5];

    function memoryArray() public pure returns (uint64[] memory) {  
        uint64[] memory tempArray = new uint64[](5);  
        tempArray[0] = 1;  
        tempArray[1] = 2;  
        tempArray[2] = 3;  
        tempArray[3] = 4;  
        tempArray[4] = 5;  
        return tempArray;  
    }  
}
```

**è§£é‡Šï¼š**

*   `storage` ä¸­çš„æ•°ç»„æ˜¯æŒä¹…çš„ï¼Œè®¿é—®å’Œä¿®æ”¹æˆæœ¬æ›´é«˜ã€‚`memory` ä¸­çš„æ•°ç»„æ˜¯ä¸´æ—¶çš„ï¼Œæˆæœ¬è¾ƒä½ä½†ä¸æŒä¹…ã€‚

**ç°å®åœºæ™¯ï¼š**

*   å¯¹äºä¸´æ—¶è®¡ç®—ä½¿ç”¨ `memory`ï¼Œå¯¹äºéœ€è¦æŒä¹…åŒ–çš„æ•°æ®ä½¿ç”¨ `storage`ã€‚é€‰æ‹©æ—¶æ³¨æ„ gas æˆæœ¬ã€‚

**é™·é˜±ï¼š**

*   é”™è¯¯ç®¡ç†å­˜å‚¨å’Œå†…å­˜å¯èƒ½å¯¼è‡´é«˜ gas æˆæœ¬å’Œä½æ•ˆã€‚å§‹ç»ˆä½¿ç”¨ `memory` è¿›è¡Œä¸´æ—¶æ“ä½œä»¥èŠ‚çœ gasã€‚

## 5\. ğŸ› ï¸ `abi.encode` ä¸ `abi.encodePacked`

**é—®é¢˜ï¼š** å±•ç¤º `abi.encode` å’Œ `abi.encodePacked` çš„åŒºåˆ«ã€‚

```solidity
pragma solidity ^0.8.18;

contract EncodingDemo {  
    function encodeData(uint256 num, string memory str) public pure returns (bytes memory, bytes memory) {  
        bytes memory encoded = abi.encode(num, str);  
        bytes memory packed = abi.encodePacked(num, str);  
        return (encoded, packed);  
    }  
}
```

**è§£é‡Šï¼š**

*   `abi.encode` æä¾›å®Œæ•´çš„ ABI å…¼å®¹ç¼–ç ï¼ŒåŒ…å«ç±»å‹ä¿¡æ¯ï¼Œè€Œ `abi.encodePacked` ç”Ÿæˆæ›´ç´§å‡‘çš„å­—èŠ‚æ•°ç»„ï¼Œå¯ç”¨äºå“ˆå¸Œä½†å¯èƒ½å¯¼è‡´å†²çªã€‚

**ç°å®åœºæ™¯ï¼š**

*   ä½¿ç”¨ `abi.encode` ç¼–ç åˆçº¦äº¤äº’æ•°æ®ï¼Œä½¿ç”¨ `abi.encodePacked` åˆ›å»ºç´§å‡‘çš„å“ˆå¸Œã€‚

**é™·é˜±ï¼š**

*   å¦‚æœä¸å°å¿ƒä½¿ç”¨ï¼Œ`abi.encodePacked` å¯èƒ½å¯¼è‡´å“ˆå¸Œå†²çªï¼Œç‰¹åˆ«æ˜¯åœ¨è¿æ¥å¤šä¸ªå˜é‡æ—¶ã€‚

## 6\. ğŸ”„ ERC4626 ä¸­çš„é€šèƒ€æ”»å‡»

**é—®é¢˜ï¼š** ä»€ä¹ˆæ˜¯ ERC4626 ä¸­çš„é€šèƒ€æ”»å‡»ï¼Œå¦‚ä½•æ¼”ç¤ºï¼Ÿ

```solidity
pragma solidity ^0.8.18;

contract ERC4626Vault {  
    mapping(address => uint256) public balances;  
    uint256 public totalSupply;

    function deposit(uint256 amount) public {  
        balances[msg.sender] += amount;  
        totalSupply += amount;  
    }  
}
```

**è§£é‡Šï¼š**

*   å¦‚æœæ”»å‡»è€…åˆ©ç”¨ä»£å¸å‘è¡Œæˆ–ä»½é¢è®¡ç®—ä¸­çš„æ¼æ´ï¼Œå¯èƒ½ä¼šå‘ç”Ÿ ERC4626 ä¸­çš„é€šèƒ€æ”»å‡»ï¼Œå¯èƒ½ä¼šé“¸é€ è¿‡å¤šçš„ä»£å¸ã€‚

**ç°å®åœºæ™¯ï¼š**

*   å§‹ç»ˆå®¡æ ¸ä»½é¢è®¡ç®—é€»è¾‘ï¼Œå¹¶è€ƒè™‘å¯èƒ½å¯¼è‡´æ„å¤–ä»£å¸é€šèƒ€çš„è¾¹ç¼˜æƒ…å†µã€‚

**é™·é˜±ï¼š**

*   ç¡®ä¿è®¡ç®—å‡†ç¡®ï¼Œå¹¶è€ƒè™‘å®æ–½ä¿æŠ¤æªæ–½ä»¥é˜²æ­¢æœªç»æˆæƒçš„ä»£å¸åˆ›å»ºã€‚

## å›°éš¾é—®é¢˜

## 7\. âš™ï¸ è‡ªå®šä¹‰é”™è¯¯ä¸å¸¦é”™è¯¯å­—ç¬¦ä¸²çš„ `require`

**é—®é¢˜ï¼š** æ¯”è¾ƒè‡ªå®šä¹‰é”™è¯¯å’Œå¸¦é”™è¯¯å­—ç¬¦ä¸²çš„ `require` åœ¨ EVM å±‚çš„ç¼–ç æ–¹å¼ã€‚

```solidity
pragma solidity ^0.8.18;

contract ErrorDemo {  
    error CustomError(string message);

    function requireError(bool condition) public pure {  
        require(condition, "Error occurred");  
    }

    function customErrorFunction(bool condition) public pure {  
        if (!condition) {  
            revert CustomError("Custom error occurred");  
        }  
    }  
}
```

**è§£é‡Šï¼š**

*   è‡ªå®šä¹‰é”™è¯¯æ›´èŠ‚çœ gasï¼Œå› ä¸ºå®ƒä»¬åœ¨äº¤æ˜“æ•°æ®ä¸­ä½¿ç”¨çš„ç©ºé—´æ¯” `require` ä¸­çš„å­—ç¬¦ä¸²å°‘ã€‚å½“é”™è¯¯é¢‘ç¹æˆ–é”™è¯¯æ¶ˆæ¯è¾ƒå¤§æ—¶ï¼Œè‡ªå®šä¹‰é”™è¯¯å¯ä»¥èŠ‚çœ gasã€‚

**ç°å®åœºæ™¯ï¼š**

*   åœ¨é¢‘ç¹äº¤äº’æˆ–å¤„ç†å¤§é‡æ•°æ®çš„åˆçº¦ä¸­ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œä»¥é™ä½äº¤æ˜“æˆæœ¬ã€‚

**é™·é˜±ï¼š**

*   è‡ªå®šä¹‰é”™è¯¯éœ€è¦åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ä»”ç»†å¤„ç†ï¼Œä»¥æ­£ç¡®è§£ç å’Œæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚

## 8\. ğŸ§© ä»£ç†ä¸­çš„å‡½æ•°é€‰æ‹©å™¨å†²çª

**é—®é¢˜ï¼š** ä»€ä¹ˆæ˜¯ä»£ç†ä¸­çš„å‡½æ•°é€‰æ‹©å™¨å†²çªï¼Œå®ƒæ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿ

```solidity
pragma solidity ^0.8.18;

contract Proxy {  
    address public implementation;

    function setImplementation(address _impl) public {  
        implementation = _impl;  
    }

    fallback() external payable {  
        (bool success, ) = implementation.delegatecall(msg.data);  
        require(success, "Delegatecall failed");  
    }  
}

contract ClashExample {  
    function clash(uint256 x) public pure returns (uint256) {  
        return x * 2;  
    }

    function clash(uint256 x, uint256 y) public pure returns (uint256) {  
        return x + y;  
    }  
}
```

**è§£é‡Šï¼š**

*   å‡½æ•°é€‰æ‹©å™¨å†²çªå‘ç”Ÿåœ¨ä¸åŒçš„å‡½æ•°å…·æœ‰ç›¸åŒçš„é€‰æ‹©å™¨æ—¶ï¼Œè¿™å¯èƒ½å¯¼è‡´é”™è¯¯çš„å‡½æ•°æ‰§è¡Œã€‚é¿å…åœ¨ä¸åŒçš„å®ç°ä¸­ä½¿ç”¨ç›¸åŒçš„å‡½æ•°ç­¾åã€‚

**ç°å®åœºæ™¯ï¼š**

*   å®ç°ç‰ˆæœ¬æ§åˆ¶æˆ–å”¯ä¸€çš„å‡½æ•°é€‰æ‹©å™¨ä»¥é˜²æ­¢å¯å‡çº§åˆçº¦ä¸­çš„å†²çªã€‚

**é™·é˜±ï¼š**

*   åœ¨åˆçº¦å‡çº§æœŸé—´æµ‹è¯•é€‰æ‹©å™¨å†²çªä»¥é¿å…æ„å¤–è¡Œä¸ºã€‚

## 9\. ğŸ“œ ä»£ç†ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ ‡

**é—®é¢˜ï¼š** åœ¨ä»£ç†ä¸Šä¸‹æ–‡ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¿¡æ ‡ï¼Œå®ƒæ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿ

```solidity
pragma solidity ^0.8.18;

contract Beacon {  
    address public implementation;

    function setImplementation(address _impl) public {  
        implementation = _impl;  
    }  
}

contract Proxy {  
    Beacon public beacon;

    function setBeacon(address _beacon) public {  
        beacon = Beacon(_beacon);  
    }

    fallback() external payable {  
        address impl = beacon.implementation();  
        (bool success, ) = impl.delegatecall(msg.data);  
        require(success, "Delegatecall failed");  
    }  
}
```

**è§£é‡Šï¼š**

*   ä¿¡æ ‡åˆçº¦é›†ä¸­ç®¡ç†å½“å‰å®ç°çš„åœ°å€ï¼Œå…è®¸å¤šä¸ªä»£ç†ä½¿ç”¨å•ä¸ªä¿¡æ ‡æ¥è§£æå…¶å®ç°ã€‚

**ç°å®åœºæ™¯ï¼š**

*   åœ¨å¯å‡çº§ä»£ç†æ¨¡å¼ä¸­ä½¿ç”¨ä¿¡æ ‡ï¼Œä»¥é«˜æ•ˆç®¡ç†å¤šä¸ªä»£ç†çš„åˆçº¦å‡çº§ã€‚

**é™·é˜±ï¼š**

*   ç¡®ä¿ä¿¡æ ‡åˆçº¦å®‰å…¨ä¸”å¦¥å–„ç®¡ç†ï¼Œä»¥é¿å…æ¼æ´ã€‚

## ç»“è®º

æŒæ¡ Solidity ä¸ä»…éœ€è¦ç†è®ºçŸ¥è¯†ï¼Œè¿˜éœ€è¦å¤„ç†å®é™…åœºæ™¯çš„å®è·µæŠ€èƒ½ã€‚æœ¬æ–‡æä¾›çš„é—®é¢˜å’Œç¤ºä¾‹æ¶µç›–äº† Solidity å¼€å‘çš„åŸºæœ¬å®è·µæ–¹é¢ï¼Œä»å¤„ç† gas é«˜æ•ˆå¾ªç¯åˆ°ç®¡ç†ä»£ç†åˆçº¦å’Œè‡ªå®šä¹‰é”™è¯¯ã€‚ç†è§£è¿™äº›æ¦‚å¿µï¼Œè¯†åˆ«å¸¸è§é™·é˜±ï¼Œå¹¶åº”ç”¨æœ€ä½³å®è·µï¼Œå°†ä¸ºä½ åœ¨ä»¥å¤ªåŠå¼€å‘é¢è¯•å’Œå®é™…åº”ç”¨ä¸­å–å¾—æˆåŠŸåšå¥½å‡†å¤‡ã€‚

> æˆ‘æ˜¯ [AI ç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œä¸ºå¤§å®¶è½¬è¯‘ä¼˜ç§€è‹±æ–‡æ–‡ç« ï¼Œå¦‚æœ‰ç¿»è¯‘ä¸é€šçš„åœ°æ–¹ï¼Œåœ¨[è¿™é‡Œ](https://github.com/lbc-team/Pioneer/blob/master/translations/9646.md)ä¿®æ”¹ï¼Œè¿˜è¯·åŒ…æ¶µï½