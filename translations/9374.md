
>- åŸæ–‡é“¾æ¥ï¼šhttps://medium.com/coinmonks/introduction-to-provable-smart-contracts-dcea94c3d5b6
>- è¯‘è€…ï¼š[AIç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œæ ¡å¯¹ï¼š[ç¿»è¯‘å°ç»„](https://learnblockchain.cn/people/412)
>- æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[learnblockchain.cn/articleâ€¦](https://learnblockchain.cn/article/9374)
    
# å¯éªŒè¯æ™ºèƒ½åˆçº¦ç®€ä»‹

![](https://img.learnblockchain.cn/attachments/migrate/1726828024906)

å¯éªŒè¯æ™ºèƒ½åˆçº¦ä½¿ç”¨åŠ å¯†æŠ€æœ¯æ¥éªŒè¯åœ¨åŒºå—é“¾å¤–éƒ¨å®Œæˆçš„è®¡ç®—æ˜¯æ­£ç¡®çš„ã€‚è¿™æ„å‘³ç€ï¼Œä¸éœ€è¦åœ¨é“¾ä¸Šå®Œæˆæ‰€æœ‰å·¥ä½œï¼ˆè¿™å¯èƒ½ä¼šå¾ˆæ…¢ä¸”æ˜‚è´µï¼‰ï¼Œè€Œæ˜¯å°†ç¹é‡çš„è®¡ç®—å·¥ä½œæ”¾åœ¨é“¾ä¸‹å®Œæˆï¼Œå¹¶ä¸”åªå°†ç»“æœçš„è¯æ˜å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šã€‚

## ä¸»è¦ä¼˜åŠ¿

1.  **å¯æ‰©å±•æ€§ï¼š** é€šè¿‡åœ¨é“¾ä¸‹å¤„ç†è®¡ç®—ï¼Œå¯éªŒè¯æ™ºèƒ½åˆçº¦å‡å°‘äº†åŒºå—é“¾çš„è´Ÿè½½ï¼Œä»è€Œå…è®¸ä»¥æ›´ä½çš„æˆæœ¬å¤„ç†æ›´å¤šçš„äº¤æ˜“ã€‚
2.  **å®‰å…¨æ€§ï¼š** åŠ å¯†è¯æ˜ç¡®ä¿åªæœ‰æœ‰æ•ˆçš„è®¡ç®—è¢«æ¥å—ï¼Œå¢å¼ºäº†æ™ºèƒ½åˆçº¦çš„å®‰å…¨æ€§ã€‚
3.  **éšç§ï¼š** åƒé›¶çŸ¥è¯†è¯æ˜ï¼ˆZKPï¼‰è¿™æ ·çš„æŠ€æœ¯å¯ä»¥åœ¨ä¸é€éœ²ä»»ä½•æ•æ„Ÿä¿¡æ¯çš„æƒ…å†µä¸‹éªŒè¯äº¤æ˜“ã€‚

## StarkNet å’Œ Cairo

StarkNet æ˜¯ä»¥å¤ªåŠä¸Šçš„ä¸€ä¸ª Layer-2 ç½‘ç»œï¼Œä½¿ç”¨ STARKï¼ˆå¯æ‰©å±•é€æ˜çŸ¥è¯†è®ºè¯ï¼‰è¯æ˜æ¥æä¾›å¯æ‰©å±•æ€§å’Œå®‰å…¨æ€§ã€‚å®ƒå…è®¸å¼€å‘è€…æ„å»ºèƒ½å¤Ÿå¤„ç†æ¯ç§’å¤§é‡äº¤æ˜“çš„ dAppï¼ŒåŒæ—¶å—ç›Šäºä»¥å¤ªåŠçš„å®‰å…¨æ€§ã€‚

## StarkNet æ¶æ„

![](https://img.learnblockchain.cn/attachments/migrate/1726828024942)

## StarkNet ä¸­çš„çŠ¶æ€å˜åŒ–å’Œ STARK è¯æ˜

å½“åœ¨ StarkNet ä¸Šæ‰§è¡Œæ™ºèƒ½åˆçº¦æ—¶ï¼Œä¼šæ¶‰åŠçŠ¶æ€å˜åŒ–ã€‚è¿™äº›çŠ¶æ€å˜åŒ–æ˜¯æ‰§è¡Œåˆçº¦åŠŸèƒ½åå¯¹åˆçº¦å­˜å‚¨æ‰€åšçš„æ›´æ–°ã€‚ä¸ºäº†ç¡®ä¿è¿™äº›çŠ¶æ€å˜åŒ–çš„æ­£ç¡®æ€§ï¼ŒStarkNet ç”Ÿæˆå¹¶éªŒè¯ STARK è¯æ˜ã€‚

ä»¥ä¸‹æ˜¯æ­¤è¿‡ç¨‹çš„é€æ­¥è§£é‡Šï¼š

### 1. æ™ºèƒ½åˆçº¦æ‰§è¡Œ

å½“ç”¨æˆ·ä¸ StarkNet ä¸Šçš„æ™ºèƒ½åˆçº¦äº¤äº’æ—¶ï¼Œä¾‹å¦‚è°ƒç”¨ä¸€ä¸ªå‡½æ•° `increase_counter`ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æ­¥éª¤ï¼š

*   **å‡½æ•°è°ƒç”¨ï¼š** ä½¿ç”¨ç‰¹å®šè¾“å…¥è°ƒç”¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨ `increase_counter(10)` å°†è®¡æ•°å™¨å¢åŠ  10ã€‚
*   **è®¡ç®—ï¼š** StarkNet è™šæ‹Ÿæœºï¼ˆVMï¼‰æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿›è¡Œå¿…è¦çš„è®¡ç®—ä»¥æ›´æ–°åˆçº¦çš„çŠ¶æ€ã€‚è¿™æ¶‰åŠè¯»å–å½“å‰çŠ¶æ€ï¼Œåº”ç”¨æ›´æ”¹ï¼Œå¹¶å°†æ–°çŠ¶æ€å†™å›å­˜å‚¨ã€‚

### 2\. ç”Ÿæˆè·Ÿè¸ª

åœ¨æ‰§è¡Œæ™ºèƒ½åˆçº¦æœŸé—´ï¼ŒStarkNet ç”Ÿæˆä¸€ä¸ª **è·Ÿè¸ª**ã€‚è·Ÿè¸ªæ˜¯æ‰§è¡ŒæœŸé—´æ¯ä¸€æ­¥è®¡ç®—çš„è¯¦ç»†æ—¥å¿—ï¼ŒåŒ…æ‹¬åˆå§‹çŠ¶æ€ã€æ‰§è¡Œçš„æ“ä½œå’Œç»“æœçŠ¶æ€ã€‚è¿™ä¸ªè·Ÿè¸ªå¯¹äºç”Ÿæˆè¯æ˜è‡³å…³é‡è¦ã€‚

### 3\. ç”Ÿæˆ STARK è¯æ˜

ä½¿ç”¨å‰ä¸€æ­¥ç”Ÿæˆçš„è·Ÿè¸ªï¼ŒStarkNet ç”Ÿæˆä¸€ä¸ª **STARK è¯æ˜**ã€‚è¿™ä¸ªè¯æ˜æ˜¯ä¸€ä¸ªåŠ å¯†è¯ä¹¦ï¼Œè¯æ˜è®¡ç®—å’Œç»“æœçŠ¶æ€å˜åŒ–çš„æ­£ç¡®æ€§ã€‚å…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

*   **æ•°æ®è¡¨ç¤ºï¼š** å°†è·Ÿè¸ªè½¬æ¢ä¸ºé€‚åˆåŠ å¯†æ“ä½œçš„æ ¼å¼ã€‚
*   **è¯æ˜è®¡ç®—ï¼š** ä½¿ç”¨ STARK åè®®è®¡ç®—è¯æ˜ã€‚è¿™æ¶‰åŠå¤æ‚çš„æ•°å­¦è¿ç®—ï¼Œç”Ÿæˆè·Ÿè¸ªæ­£ç¡®æ€§çš„ç®€æ´è¡¨ç¤ºã€‚

### 4\. æäº¤å’ŒéªŒè¯è¯æ˜

ç”Ÿæˆçš„ STARK è¯æ˜ä»¥åŠæ–°çš„çŠ¶æ€å˜åŒ–è¢«æäº¤åˆ°ä»¥å¤ªåŠä¸»ç½‘è¿›è¡ŒéªŒè¯ã€‚è¿™æ˜¯ STARKs é«˜æ•ˆæ€§çš„ä½“ç°ï¼š

*   **é“¾ä¸ŠéªŒè¯ï¼š** ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ï¼ˆStarkNet éªŒè¯å™¨ï¼‰åªéœ€éªŒè¯ STARK è¯æ˜ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰§è¡Œæ•´ä¸ªè®¡ç®—ã€‚è¿™ä¸ªéªŒè¯è¿‡ç¨‹è¦å¿«å¾—å¤šï¼Œå¹¶ä¸”éœ€è¦çš„è®¡ç®—èƒ½åŠ›è¿œå°‘äºé‡æ–°æ‰§è¡Œã€‚
*   **çŠ¶æ€æ‰¿è¯ºï¼š** ä¸€æ—¦è¯æ˜è¢«éªŒè¯ï¼Œæ–°çŠ¶æ€å˜åŒ–è¢«æ¥å—å¹¶æäº¤åˆ° StarkNet çŠ¶æ€ã€‚

## ç¤ºä¾‹å·¥ä½œæµç¨‹

è®©æˆ‘ä»¬ä»¥è®¡æ•°å™¨åˆçº¦ä¸ºä¾‹æ¥è¯´æ˜è¿™ä¸ªè¿‡ç¨‹ï¼š

1.  **åˆå§‹çŠ¶æ€ï¼š** å‡è®¾è®¡æ•°å™¨å€¼ä¸º 0ã€‚
2.  **å‡½æ•°è°ƒç”¨ï¼š** ç”¨æˆ·è°ƒç”¨ `increase_counter(10)`ã€‚
3.  **è®¡ç®—ï¼š** StarkNet VM è®¡ç®—æ–°çš„è®¡æ•°å™¨å€¼ï¼Œå³ 10ã€‚
4.  **ç”Ÿæˆè·Ÿè¸ªï¼š** ç”Ÿæˆä¸€ä¸ªè·Ÿè¸ªï¼Œè®°å½•åˆå§‹è®¡æ•°å™¨å€¼ï¼ˆ0ï¼‰ã€å¢é‡æ“ä½œå’Œç»“æœè®¡æ•°å™¨å€¼ï¼ˆ10ï¼‰ã€‚
5.  **ç”Ÿæˆè¯æ˜ï¼š** ä½¿ç”¨è·Ÿè¸ªç”Ÿæˆä¸€ä¸ª STARK è¯æ˜ï¼Œè¯æ˜è®¡ç®—ï¼ˆ0 + 10 = 10ï¼‰æ˜¯æ­£ç¡®æ‰§è¡Œçš„ã€‚
6.  **æäº¤è¯æ˜ï¼š** å°† STARK è¯æ˜å’Œæ–°çš„è®¡æ•°å™¨å€¼ï¼ˆ10ï¼‰æäº¤åˆ°ä»¥å¤ªåŠä¸»ç½‘ã€‚
7.  **éªŒè¯ï¼š** ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦éªŒè¯ STARK è¯æ˜ã€‚
8.  **çŠ¶æ€æ‰¿è¯ºï¼š** éªŒè¯æˆåŠŸåï¼Œæ–°çš„è®¡æ•°å™¨å€¼ï¼ˆ10ï¼‰è¢«æäº¤åˆ° StarkNet çš„çŠ¶æ€ã€‚

## ä»€ä¹ˆæ˜¯ Cairo è¯­è¨€ï¼Ÿ

Cairoï¼ˆè®¡ç®—æœºä»£æ•°ç”¨äº RISC æ“ä½œï¼‰æ˜¯ä¸€ç§ä¸“é—¨ä¸ºç¼–å†™å¯éªŒè¯ç¨‹åºè€Œè®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ StarkNet ä¸Šå¼€å‘æ™ºèƒ½åˆçº¦çš„æœ¬åœ°è¯­è¨€ï¼Œåˆ©ç”¨é›¶çŸ¥è¯†è¯æ˜ç¡®ä¿è®¡ç®—å®Œæ•´æ€§ã€‚

**Cairo çš„ä¸»è¦ç‰¹ç‚¹ï¼š**

1.  **ç”Ÿæˆè¯æ˜ï¼š** Cairo å…è®¸åˆ›å»ºç®€æ´çš„è¯æ˜ï¼Œè¯æ˜è®¡ç®—çš„æ­£ç¡®æ€§ã€‚
2.  **é«˜æ•ˆæ€§ï¼š** è®¾è®¡ç”¨äºé«˜æ€§èƒ½è®¡ç®—ï¼ŒCairo èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤æ‚ç®—æ³•ã€‚
3.  **äº’æ“ä½œæ€§ï¼š** Cairo æ™ºèƒ½åˆçº¦å¯ä»¥ä¸ä»¥å¤ªåŠå’Œå…¶ä»–åŒºå—é“¾å¹³å°æ— ç¼äº¤äº’ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨åœ¨ StarkNet ä¸Šæ„å»ºã€éƒ¨ç½²å’Œäº¤äº’æ™ºèƒ½åˆçº¦çš„æ­¥éª¤ã€‚

## é¢„å¤‡æ¡ä»¶

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²å®‰è£…ä»¥ä¸‹å†…å®¹ï¼š

1.  Rust (>= 1.51.0)
2.  `cargo` (Rust çš„åŒ…ç®¡ç†å™¨)
3.  Node.js (>= 12.x)
4.  npm (Node åŒ…ç®¡ç†å™¨)
5.  `starknet-devnet` (StarkNet æœ¬åœ°æµ‹è¯•ç½‘)
6.  `starknet` CLI
7.  `scarb` (Cairo çš„ Rust åŒ…ç®¡ç†å™¨)

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…å¿…è¦çš„å·¥å…·ï¼š

\# å®‰è£… Rust  
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh  
  
\# å®‰è£… Node.js å’Œ npmï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰  
sudo apt-get install nodejs  
sudo apt-get install npm  
  
\# å®‰è£… StarkNet CLI  
pip install starknet-devnet  
  
\# å®‰è£… Scarbï¼ˆCairo çš„ Rust åŒ…ç®¡ç†å™¨ï¼‰  
curl -L https://github.com/software-mansion/scarb/releases/download/latest/scarb-x86\_64-unknown-linux-gnu.tar.gz | tar xz  
sudo mv scarb /usr/local/bin

## è®¾ç½® StarkNet Devnet

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ StarkNet Devnetï¼š

starknet-devnet

æ­¤å‘½ä»¤å°†åœ¨ `http://localhost:5000` å¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„ StarkNet Devnet å®ä¾‹ã€‚

## åˆ›å»º Rust Cairo é¡¹ç›®

åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®å¹¶æ·»åŠ  Cairo çš„å¿…è¦ä¾èµ–é¡¹ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

cargo new starknet\_counter  
cd starknet\_counter

å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°ä½ çš„ `Cargo.toml` æ–‡ä»¶ä¸­ï¼š

\[dependencies\]  
cairo = "0.1"  
starknet = { git = "https://github.com/starkware-libs/cairo.git" }

## ç¼–å†™æ™ºèƒ½åˆçº¦

åˆ›å»ºä¸€ä¸ªåä¸º `src/main.rs` çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ç”¨äºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åˆçº¦ï¼š

use cairo::contract;  
use cairo::types::felt::Felt252;  
use cairo::starknet::storage::Storage;  
use cairo::starknet::types::Address;  
  
#\[contract\]  
mod counter {  
    use super::\*;  
    #\[storage\]  
    struct Storage {  
        counter: Felt252,  
    }  
  
    #\[constructor\]  
    fn new() \-> Storage {  
        Storage {  
            counter: Felt252::from(0),  
        }  
    }  
  
    #\[external\]  
    fn increase\_counter(storage: &mut Storage, amount: Felt252) {  
        storage.counter += amount;  
    }  

  
    #\[view\]  
    fn get\_counter(storage: &Storage) \-> Felt252 {  
        storage.counter  
    }  
}

è¿™ä¸ªåˆçº¦å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼ŒåŒ…å«ä¸¤ä¸ªå‡½æ•°ï¼š

1.  `increase_counter(amount: Felt252)`: æŒ‰æŒ‡å®šæ•°é‡å¢åŠ è®¡æ•°å™¨ã€‚
2.  `get_counter() -> Felt252`: è·å–è®¡æ•°å™¨çš„å½“å‰å€¼ã€‚

## ç¼–è¯‘åˆçº¦

ä½¿ç”¨ Scarb å·¥å…·ç¼–è¯‘åˆçº¦ï¼š

scarb build

è¿™å°†åœ¨ `target` ç›®å½•ä¸­ç”Ÿæˆå¿…è¦çš„ç¼–è¯‘æ–‡ä»¶ã€‚

## éƒ¨ç½²åˆçº¦

ä½¿ç”¨ StarkNet CLI å°†ç¼–è¯‘åçš„åˆçº¦éƒ¨ç½²åˆ° StarkNet Devnetï¼š

starknet deploy --contract target/release/starknet\_counter.sierra.json --abi target/release/starknet\_counter.abi.json --network localhost

è®°å½•éƒ¨ç½²è¾“å‡ºä¸­çš„åˆçº¦åœ°å€å’Œäº¤æ˜“å“ˆå¸Œã€‚ä½ éœ€è¦åˆçº¦åœ°å€æ¥ä¸åˆçº¦è¿›è¡Œäº¤äº’ã€‚

## ä¸åˆçº¦äº¤äº’

è¦ä¸åˆçº¦äº¤äº’ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ StarkNet CLIã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å°†è®¡æ•°å™¨å¢åŠ  10ã€‚

starknet invoke --function increase\_counter --inputs 10 --address <contract\_address> --abi target/release/starknet\_counter.abi.json --network localhost

å°† `<contract_address>` æ›¿æ¢ä¸ºä»éƒ¨ç½²æ­¥éª¤ä¸­è·å¾—çš„å®é™…åˆçº¦åœ°å€ã€‚

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æŸ¥è¯¢è®¡æ•°å™¨çš„å½“å‰å€¼ã€‚

starknet call --function get\_counter --address <contract\_address> --abi target/release/starknet\_counter.abi.json --network localhost

è¿™åº”è¯¥è¿”å› `10`ï¼Œå› ä¸ºæˆ‘ä»¬åˆšåˆšå°†è®¡æ•°å™¨å¢åŠ äº† 10ã€‚

## L1-L2 æ¶ˆæ¯ä¼ é€’

L1-L2 æ¶ˆæ¯ä¼ é€’æ˜¯æŒ‡ Layer-1 åŒºå—é“¾ä¸å…¶ Layer-2 è§£å†³æ–¹æ¡ˆä¹‹é—´çš„é€šä¿¡åè®®ã€‚Layer-2 è§£å†³æ–¹æ¡ˆæ—¨åœ¨å¤„ç†ä¸»åŒºå—é“¾ä¹‹å¤–çš„äº¤æ˜“ï¼Œä»¥æé«˜å¯æ‰©å±•æ€§ã€é™ä½äº¤æ˜“è´¹ç”¨å¹¶å¢åŠ ååé‡ã€‚è¿™äº›è§£å†³æ–¹æ¡ˆä»ç„¶å¿…é¡»ä¸ L1 åŒºå—é“¾è¿›è¡Œäº¤äº’ï¼Œä»¥ç¡®ä¿äº¤æ˜“çš„å®‰å…¨æ€§ã€äº’æ“ä½œæ€§å’Œæœ€ç»ˆæ€§ã€‚

## L1-L2 æ¶ˆæ¯ä¼ é€’å¦‚ä½•å·¥ä½œï¼Ÿ

L1-L2 æ¶ˆæ¯ä¼ é€’é€šå¸¸æ¶‰åŠå‡ ä¸ªå…³é”®æ­¥éª¤ï¼š

1.  **åœ¨ L2 ä¸Šå‘èµ·äº¤æ˜“ï¼š**

*   ç”¨æˆ·åœ¨ L2 è§£å†³æ–¹æ¡ˆä¸Šå‘èµ·äº¤æ˜“ï¼Œä¾‹å¦‚æ”¯ä»˜æˆ–æ™ºèƒ½åˆçº¦æ‰§è¡Œã€‚
*   äº¤æ˜“åœ¨é“¾ä¸‹å¤„ç†ï¼Œåˆ©ç”¨ L2 çš„å¯æ‰©å±•æ€§å’Œè¾ƒä½æˆæœ¬ã€‚

**2\. ç”Ÿæˆè¯æ˜ï¼š**

*   å¤„ç†äº¤æ˜“åï¼ŒL2 è§£å†³æ–¹æ¡ˆç”Ÿæˆäº¤æ˜“æœ‰æ•ˆæ€§çš„åŠ å¯†è¯æ˜ã€‚
*   è¯¥è¯æ˜æ˜¯äº¤æ˜“æ•°æ®çš„ç®€æ´è¡¨ç¤ºï¼Œç¡®ä¿å¯ä»¥åœ¨ L1 åŒºå—é“¾ä¸Šé«˜æ•ˆéªŒè¯ã€‚

**3\. å‘ L1 æäº¤è¯æ˜ï¼š**

*   ç”Ÿæˆçš„è¯æ˜æäº¤åˆ° L1 åŒºå—é“¾ã€‚
*   è¿™ç§æäº¤å¯ä»¥å®šæœŸè¿›è¡Œï¼Œå°†å¤šä¸ªäº¤æ˜“æ‰¹é‡å¤„ç†ä»¥è¿›ä¸€æ­¥é™ä½æˆæœ¬ã€‚

**4\. åœ¨ L1 ä¸ŠéªŒè¯å’Œæœ€ç»ˆç¡®å®šï¼š**

*   L1 åŒºå—é“¾éªŒè¯åŠ å¯†è¯æ˜ã€‚
*   ä¸€æ—¦éªŒè¯é€šè¿‡ï¼ŒL2 ä¸Šå¤„ç†çš„äº¤æ˜“è¢«è®¤ä¸ºæ˜¯æœ€ç»ˆçš„å’Œå®‰å…¨çš„ï¼Œåˆ©ç”¨ L1 åŒºå—é“¾çš„å®‰å…¨æ€§ã€‚

## ç¤ºä¾‹ï¼šStarkNet å’Œ Cairo

### åˆ›å»º Rust Cairo é¡¹ç›®

åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®å¹¶æ·»åŠ  Cairo çš„å¿…è¦ä¾èµ–é¡¹ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```
cargo new l1_l2_messaging  
cd l1_l2_messaging
```

å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°ä½ çš„ `Cargo.toml` æ–‡ä»¶ä¸­ï¼š
```
[dependencies]  
cairo-lang = "0.6.2"  
starknet = { git = "https://github.com/starkware-libs/starknet-rs.git" }
```

### ç”¨ Rust ç¼–å†™ Cairo åˆçº¦

åˆ›å»ºä¸€ä¸ªåä¸º `src/main.rs` çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ L1-L2 æ¶ˆæ¯ä¼ é€’åˆçº¦ä»£ç ï¼š
```
use cairo::contract;  
use cairo::types::felt::Felt252;  
use cairo::starknet::storage::Storage;  
use cairo::starknet::types::Address;  
  
#[contract]  
mod l1_l2_messaging {  
    use super::*;  
  
    #[storage]  
    struct Storage {  
        message: Felt252,  
    }  
  
    #[constructor]  
    fn new() -> Storage {  
        Storage {  
            message: Felt252::from(0),  
        }  
    }  
  
    #[external]  
    fn send_message(storage: &mut Storage, sender: Felt252, message: Felt252) {  
        storage.message = message;  
        emit_message_sent(sender, message);  
    }  
  
    #[view]  
    fn get_message(storage: &Storage) -> Felt252 {  
        storage.message  
    }  
  
    #[event]  
    fn emit_message_sent(sender: Felt252, message: Felt252);  
}
```
### ç¼–è¯‘åˆçº¦

ä½¿ç”¨ Scarb å·¥å…·ç¼–è¯‘åˆçº¦ï¼š

scarb build

### éƒ¨ç½²åˆçº¦

ä½¿ç”¨ StarkNet CLI å°†ç¼–è¯‘åçš„åˆçº¦éƒ¨ç½²åˆ° StarkNet Devnetï¼š
```
starknet deploy --contract target/release/l1_l2_messaging.sierra.json --abi target/release/l1_l2_messaging.abi.json --network localhost
```
è®°å½•éƒ¨ç½²è¾“å‡ºä¸­çš„åˆçº¦åœ°å€ã€‚

### ä¸åˆçº¦äº¤äº’

1.  **å‘é€æ¶ˆæ¯ï¼š**
```
starknet invoke --function send_message --inputs 123 456 --address <contract_address> --abi target/release/l1_l2_messaging.abi.json --network localhost
```

å°† `<contract_address>` æ›¿æ¢ä¸ºä»éƒ¨ç½²æ­¥éª¤ä¸­è·å¾—çš„å®é™…åˆçº¦åœ°å€ã€‚è¿™é‡Œï¼Œ`123` æ˜¯å‘é€è€…çš„åœ°å€ï¼Œ`456` æ˜¯æ¶ˆæ¯ã€‚

**2\. è·å–å­˜å‚¨çš„æ¶ˆæ¯ï¼š**
```
starknet call --function get\_message --address <contract\_address> --abi target/release/l1\_l2\_messaging.abi.json --network localhost
```
### è§£é‡Š

*   **send\_message(sender: Felt252, message: Felt252):** æ­¤å‡½æ•°å…è®¸å‘é€è€…å‘é€æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯éšåå­˜å‚¨åœ¨åˆçº¦çš„å­˜å‚¨ä¸­ã€‚å®ƒè¿˜ä¼šå‘å‡ºä¸€ä¸ªäº‹ä»¶ `emit_message_sent`ï¼ŒåŒ…å«å‘é€è€…å’Œæ¶ˆæ¯ã€‚
*   **get\_message():** æ­¤è§†å›¾å‡½æ•°ä»åˆçº¦çš„å­˜å‚¨ä¸­æ£€ç´¢å­˜å‚¨çš„æ¶ˆæ¯ã€‚
*   **emit\_message\_sent(sender: Felt252, message: Felt252):** æ­¤äº‹ä»¶å‡½æ•°å‘å‡ºä¸€ä¸ªæ¶ˆæ¯äº‹ä»¶ä»¥è¿›è¡Œè·Ÿè¸ªã€‚

## StarkNet å’Œ Cairo çš„æœ‰ç”¨èµ„æº

è¦è¿›ä¸€æ­¥æ¢ç´¢ StarkNet å’Œ Cairoï¼Œä»¥ä¸‹èµ„æºå°†ä¸ºä½ æä¾›å…¨é¢çš„æŒ‡å—ã€æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒï¼š

### å®˜æ–¹æ–‡æ¡£

*   **StarkNet æ–‡æ¡£:** StarkNet Docs
*   **Cairo è¯­è¨€æ–‡æ¡£:** Cairo Lang Docs

### å¼€å‘å·¥å…·

*   **StarkNet CLI:** [StarkNet CLI GitHub](https://github.com/starkware-libs/cairo-lang)
*   **Scarb (Cairo çš„ Rust åŒ…ç®¡ç†å™¨):** [Scarb GitHub](https://github.com/software-mansion/scarb)

### å­¦ä¹ èµ„æº

*   **StarkNet Base:** StarkNet Base
*   **Cairo æ•™ç¨‹:** Cairo Tutorial

### ç¤¾åŒºå’Œæ”¯æŒ

*   **StarkNet ç¤¾åŒº:** StarkNet Community
*   **StarkNet Discord:** StarkNet Discord
*   **Cairo GitHub:** [Cairo GitHub](https://github.com/starkware-libs/cairo)

### ç¤ºä¾‹é¡¹ç›®

*   **StarkNet ç¤ºä¾‹:** [StarkNet Examples GitHub](https://github.com/starkware-libs/starknet-examples)
*   **Cairo ç¤ºä¾‹é¡¹ç›®:** [Cairo Examples GitHub](https://github.com/starkware-libs/cairo/tree/main/examples)

è¿™äº›èµ„æºå°†å¸®åŠ©ä½ å¼€å§‹åœ¨ StarkNet ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶ä½¿ç”¨ Cairo ç¼–å†™æ™ºèƒ½åˆçº¦ï¼Œä¸ºä½ æä¾›å¿…è¦çš„å·¥å…·ã€æ•™ç¨‹å’Œç¤¾åŒºæ”¯æŒï¼Œä»¥æ„å»ºå¯æ‰©å±•å’Œå®‰å…¨çš„ dAppsã€‚

## ğŸš€ æ¢ç´¢æ›´å¤š by Luis Soares

ğŸ“š **å­¦ä¹ ä¸­å¿ƒ:** é€šè¿‡æˆ‘çš„å¹¿æ³›èµ„æºé›†åˆï¼Œæ‰©å±•ä½ åœ¨ Rustã€è½¯ä»¶å¼€å‘ã€äº‘è®¡ç®—ã€ç½‘ç»œå®‰å…¨ã€åŒºå—é“¾å’Œ Linux ç­‰å„ä¸ªæŠ€æœ¯é¢†åŸŸçš„çŸ¥è¯†ï¼š

*   **GitHub ä»“åº“ä¸­çš„åŠ¨æ‰‹æ•™ç¨‹**: é€šè¿‡åˆ†æ­¥æ•™ç¨‹å’Œä¸“ç”¨ GitHub ä»“åº“ï¼Œè·å¾—ä¸åŒæŠ€æœ¯çš„å®é™…æŠ€èƒ½ã€‚ [è®¿é—®æ•™ç¨‹](/@luishrsoares)
*   **æ·±å…¥æŒ‡å—å’Œæ–‡ç« **: é€šè¿‡è¯¦ç»†çš„æŒ‡å—å’Œæ–‡ç« ï¼Œæ·±å…¥äº†è§£ Rustã€è½¯ä»¶å¼€å‘ã€äº‘è®¡ç®—ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œå†…å«å®é™…ç¤ºä¾‹ã€‚ [é˜…è¯»æ›´å¤š](/@luishrsoares)
*   **ç”µå­ä¹¦é›†åˆ**: é€šè¿‡ä¸€ç³»åˆ—ç”µå­ä¹¦ï¼ŒåŒ…æ‹¬ã€ŠæŒæ¡ Rust æ‰€æœ‰æƒã€‹å’Œã€Šåº”ç”¨å®‰å…¨æŒ‡å—ã€‹ç­‰æ ‡é¢˜ï¼Œå¢å¼ºä½ å¯¹å„ç§æŠ€æœ¯é¢†åŸŸçš„ç†è§£ [ä¸‹è½½ç”µå­ä¹¦](https://www.amazon.com/Hands-Rust-Ownership-Real-World-Projects/dp/B0CLVH297D/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=&sr=)
*   **é¡¹ç›®å±•ç¤º**: å‘ç°è·¨ä¸åŒé¢†åŸŸçš„å…¨åŠŸèƒ½é¡¹ç›®ï¼Œå¦‚ API ç½‘å…³ã€åŒºå—é“¾ç½‘ç»œã€ç½‘ç»œå®‰å…¨å·¥å…·ã€äº‘æœåŠ¡ç­‰ã€‚ [æŸ¥çœ‹é¡¹ç›®](/@luishrsoares/list/mastering-rust-programming-06763d788b6e)
*   **LinkedIn æ–°é—»é€šè®¯**: é€šè¿‡è®¢é˜…æˆ‘åœ¨ LinkedIn ä¸Šçš„æ–°é—»é€šè®¯ï¼Œè·å– Rustã€è½¯ä»¶å¼€å‘å’Œæ–°å…´æŠ€æœ¯çš„å®šæœŸæ›´æ–°å’Œè§è§£ï¼Œåœ¨å¿«é€Ÿå‘å±•çš„æŠ€æœ¯é¢†åŸŸä¿æŒé¢†å…ˆã€‚ [è®¢é˜…è¿™é‡Œ](https://www.linkedin.com/build-relation/newsletter-follow?entityUrn=7128341615663886336)

**ğŸ”— ä¸æˆ‘è”ç³»**:

*   **Medium**: åœ¨ Medium ä¸Šé˜…è¯»æˆ‘çš„æ–‡ç« ï¼Œå¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€‚è¿™ä¼šæ¿€åŠ±æˆ‘ç»§ç»­å†™ä½œå’Œåˆ†äº« Rust å†…å®¹ã€‚[åœ¨ Medium ä¸Šå…³æ³¨](/@luishrsoares)
*   **LinkedIn**: åŠ å…¥æˆ‘çš„èŒä¸šç½‘ç»œï¼Œè¿›è¡Œæ›´å¤šæœ‰è§åœ°çš„è®¨è®ºå’Œæ›´æ–°ã€‚[åœ¨ LinkedIn ä¸Šè¿æ¥](https://www.linkedin.com/in/luishsoares/)
*   **Twitter**: åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘ï¼Œè·å–å…³äº Rust ç¼–ç¨‹çš„å¿«é€Ÿæ›´æ–°å’Œæƒ³æ³•ã€‚[åœ¨ Twitter ä¸Šå…³æ³¨](https://twitter.com/luishsoares)

**æƒ³èŠèŠå—ï¼Ÿç•™ä¸‹è¯„è®ºæˆ–ç»™æˆ‘å‘æ¶ˆæ¯å§ï¼**
 
**luis.soares@linux.com

é¦–å¸­è½¯ä»¶å·¥ç¨‹å¸ˆ | åŒºå—é“¾ & ZKP åè®®å·¥ç¨‹å¸ˆ | ğŸ¦€ Rust | Web3 | Solidity | Golang | å¯†ç å­¦ | ä½œè€…

> æˆ‘æ˜¯ [AI ç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œä¸ºå¤§å®¶è½¬è¯‘ä¼˜ç§€è‹±æ–‡æ–‡ç« ï¼Œå¦‚æœ‰ç¿»è¯‘ä¸é€šçš„åœ°æ–¹ï¼Œåœ¨[è¿™é‡Œ](https://github.com/lbc-team/Pioneer/blob/master/translations/9374.md)ä¿®æ”¹ï¼Œè¿˜è¯·åŒ…æ¶µï½