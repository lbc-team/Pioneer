
>- åŸæ–‡é“¾æ¥ï¼šhttps://soliditylang.org/blog/2024/10/09/solidity-0.8.28-release-announcement/
>- è¯‘è€…ï¼š[AIç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œæ ¡å¯¹ï¼š[ç¿»è¯‘å°ç»„](https://learnblockchain.cn/people/412)
>- æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[learnblockchain.cn/articleâ€¦](https://learnblockchain.cn/article/9501)
    
---
title: 'Solidity 0.8.28 å‘å¸ƒå…¬å‘Š'
date: '2024-10-09'
author: Solidity å›¢é˜Ÿ
category: Releases
---

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒå‘å¸ƒ Solidity ç¼–è¯‘å™¨ [v0.8.28](https://github.com/ethereum/solidity/releases/tag/v0.8.28)ã€‚

æ­¤æœ€æ–°ç‰ˆæœ¬çš„ç¼–è¯‘å™¨å…¨é¢æ”¯æŒå€¼ç±»å‹çš„ç¬æ€å­˜å‚¨çŠ¶æ€å˜é‡ï¼Œæ”¹è¿›äº†é€šè¿‡ IR åŠ é€Ÿç¼–è¯‘å¹¶æ˜¾è‘—é™ä½å†…å­˜ä½¿ç”¨ï¼Œä¿®å¤ä¸€äº›é”™è¯¯ç­‰ï¼

# çªå‡ºç‰¹æ€§

## æ”¯æŒç¬æ€å­˜å‚¨å€¼ç±»å‹çŠ¶æ€å˜é‡

ç¼–è¯‘å™¨çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ (v0.8.27) å¼•å…¥äº† [å¯¹ç¬æ€å­˜å‚¨å˜é‡çš„è§£æå™¨æ”¯æŒ](https://soliditylang.org/blog/2024/09/04/solidity-0.8.27-release-announcement)ï¼ˆå‚è§é™„åŠ è¯´æ˜ï¼‰ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨å¯ä»¥æ¥å—å°†æŸäº›å˜é‡æ ‡è®°ä¸º `transient` çš„è¯­æ³•ï¼Œå¹¶å…è®¸ç”¨æˆ·ç”Ÿæˆç¬æ€å­˜å‚¨å¸ƒå±€ã€‚

ç„¶è€Œï¼Œä¹‹å‰æ— æ³•ä¸ºä½¿ç”¨æ­¤ç±»å˜é‡çš„åˆçº¦ç”Ÿæˆå­—èŠ‚ç ã€‚æ­¤æœ€æ–°ç‰ˆæœ¬çš„ç¼–è¯‘å™¨åœ¨ IR å’Œä¼ ç»Ÿå¤„ç†æµç¨‹ä¸­å…¨é¢æ”¯æŒå€¼ç±»å‹çš„ç¬æ€çŠ¶æ€å˜é‡ã€‚

ä½ å¯ä»¥æŸ¥çœ‹æ–°æ–‡æ¡£ä»¥äº†è§£æœ‰å…³ [ç¬æ€å­˜å‚¨](https://docs.soliditylang.org/en/v0.8.28/contracts.html#transient-storage) çš„æ›´å¤šä¿¡æ¯ã€‚

ğŸ’¡ **æ³¨æ„ï¼š** å¦‚æœä½ æƒ³å°†å­˜å‚¨ä¸­çš„çŠ¶æ€å˜é‡æå‡ä¸ºç¬æ€å­˜å‚¨ï¼Œä½†ä¸å¸Œæœ›åç»­çŠ¶æ€å˜é‡çš„å­˜å‚¨å¸ƒå±€å—åˆ°å½±å“ï¼Œåˆ™éœ€è¦åœ¨æå‡çš„å˜é‡ä½ç½®æ·»åŠ ä¸€ä¸ªç›¸åŒç±»å‹çš„è™šæ‹ŸçŠ¶æ€å˜é‡ï¼Œå› ä¸ºå­˜å‚¨å¸ƒå±€å’Œ [ç¬æ€å­˜å‚¨å¸ƒå±€](https://docs.soliditylang.org/en/v0.8.28/internals/layout_in_storage.html#transient-storage-layout) æ˜¯ç‹¬ç«‹çš„ã€‚

## ä»…æŒ‰éœ€ç”Ÿæˆ Yul ASTs çš„ JSON è¡¨ç¤º

ç¼–è¯‘å™¨å†…éƒ¨ç¼“å­˜äº†å®ƒç”Ÿæˆçš„å¤§å¤šæ•°è¾“å‡ºï¼Œä»¥ä¾¿å¯ä»¥é‡ç”¨ã€‚
è¿™åœ¨åŒæ—¶è¯·æ±‚ `--abi` å’Œ `--metadata` æ—¶å¾ˆæœ‰ç”¨ï¼ˆå› ä¸ºå‰è€…ä¹ŸåµŒå…¥åœ¨åè€…ä¸­ï¼‰ï¼Œæˆ–è€…å½“åˆçº¦ä¹‹é—´å­˜åœ¨å­—èŠ‚ç ä¾èµ–æ—¶ï¼ˆä¸­é—´ Yul ä»£ç åªéœ€ç”Ÿæˆä¸€æ¬¡ï¼‰ã€‚

ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç§ç¼“å­˜æ˜¾å¾—è¿‡äºç§¯æã€‚
ç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠå¤§å‹é¡¹ç›®å’Œ JSON å·¥ä»¶æ—¶ï¼Œæ•°æ®é‡å¤§ä¸”ç§¯ç´¯è¿…é€Ÿï¼Œå ç”¨äº†å¤§é‡å†…å­˜ã€‚
ç”±äºåƒ Yul ASTs è¿™æ ·çš„å·¥ä»¶å°šæœªè¢«é‡ç”¨ï¼Œè¿™ç§æˆæœ¬å®é™…ä¸Šå¹¶æ²¡æœ‰å¸¦æ¥æ€§èƒ½æå‡ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªä¸å¥½çš„æƒè¡¡ã€‚

æ­¤å¤–ï¼Œä¸€äº›æœ€è¿‘å¼•å…¥çš„å·¥ä»¶ï¼Œå¦‚ Yul ASTsï¼Œè¢«è®¤ä¸ºæ˜¯å®éªŒæ€§çš„ï¼Œå°šæœªé›†æˆåˆ°ç¼–è¯‘å™¨çš„æƒ°æ€§è¾“å‡ºè¯„ä¼°æœºåˆ¶ä¸­ï¼Œè¿™æ„å‘³ç€å³ä½¿æ²¡æœ‰æ˜ç¡®è¯·æ±‚ï¼Œå®ƒä»¬ä¹Ÿä¼šäº§ç”Ÿå†…å­˜å’Œæ€§èƒ½æˆæœ¬ã€‚

æ­¤ç‰ˆæœ¬æ¶ˆé™¤äº†ä¸€äº›ç¼“å­˜ï¼Œå‡å°‘äº†çœŸå®é¡¹ç›® IR ç¼–è¯‘çš„å†…å­˜ä½¿ç”¨é‡é«˜è¾¾ 80%ã€‚å®ƒè¿˜é˜²æ­¢åœ¨æœªæ˜ç¡®è¯·æ±‚æ—¶ç”Ÿæˆ Yul ASTsï¼Œä»è€Œå‡å°‘ IR å¤„ç†æµç¨‹çš„è¿è¡Œæ—¶é—´é«˜è¾¾ 25%ã€‚

ä¸‹é¢ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åŸºå‡†æµ‹è¯•çš„ä¸€äº›æµè¡Œé¡¹ç›®ä¸­ï¼Œé€šè¿‡ IR å’Œå®Œå…¨ä¼˜åŒ–è¿›è¡Œå­—èŠ‚ç ç”Ÿæˆçš„æ•´ä½“ç¼–è¯‘æ—¶é—´å’Œ RAM ä½¿ç”¨é‡çš„å˜åŒ–ï¼š

|         æ–‡ä»¶         | æ—¶é—´ (0.8.27) |  æ—¶é—´ (0.8.28) |      å˜åŒ– |
|----------------------|--------------:|---------------:|------------:|
| openzeppelin         |          40 s |           35 s |        -13% |
| uniswap-v4           |         157 s |          128 s |        -18% |
| eigenlayer           |         716 s |          545 s |        -24% |

|         æ–‡ä»¶         | å†…å­˜ (0.8.27) |  å†…å­˜ (0.8.28) |      å˜åŒ– |
|----------------------|----------------:|-----------------:|------------:|
| openzeppelin         |        1220 MiB |          506 MiB |        -59% |
| uniswap-v4           |        4805 MiB |         1496 MiB |        -69% |
| eigenlayer           |       20346 MiB |         4455 MiB |        -78% |

## æ¯ä¸ªåˆçº¦çš„å¤„ç†æµç¨‹é…ç½®

ç¼–è¯‘å™¨å…·æœ‰æƒ°æ€§è¯„ä¼°æœºåˆ¶ï¼Œå…è®¸å®ƒä»…æ‰§è¡Œç”Ÿæˆè¯·æ±‚è¾“å‡ºæ‰€éœ€çš„ç¼–è¯‘å¤„ç†æµç¨‹ã€‚
å”¯ä¸€å¼ºåˆ¶æ€§çš„é˜¶æ®µæ˜¯è§£æå’Œåˆ†æï¼Œå¿…è¦æ—¶ç”¨äºæ£€æµ‹å’Œæ˜¾ç¤ºæºä»£ç ä¸­çš„é”™è¯¯ã€‚
åˆ†æäº§ç”Ÿçš„ä¿¡æ¯è¶³ä»¥ç”¨äºè¾“å‡ºå¦‚ ABIã€å…ƒæ•°æ®ã€Solidity AST æˆ–å­˜å‚¨å¸ƒå±€ã€‚
å¦‚æœæœªè¯·æ±‚å­—èŠ‚ç æˆ– IRï¼Œåˆ™å¯ä»¥è·³è¿‡åç»­é˜¶æ®µï¼Œå³ä»£ç ç”Ÿæˆã€ä¼˜åŒ–å’Œå­—èŠ‚ç ç”Ÿæˆã€‚

ç›´åˆ°ç°åœ¨ï¼Œæœºåˆ¶çš„ç®€å•è®¾è®¡æ„å‘³ç€å¤„ç†æµç¨‹æ€»æ˜¯å¿…é¡»ä¸ºæ‰€æœ‰åˆçº¦è¿è¡Œç›¸åŒçš„é˜¶æ®µã€‚
å› æ­¤ï¼Œå³ä½¿åªä¸ºä¸€ä¸ªåˆçº¦è¯·æ±‚å­—èŠ‚ç ï¼Œä¹Ÿä¼šå¯¼è‡´æ‰€æœ‰åˆçº¦ç”Ÿæˆä¸å¿…è¦çš„å­—èŠ‚ç ï¼Œå°½ç®¡æœ€ç»ˆè¾“å‡ºè¢«ä¸¢å¼ƒã€‚
æ­¤ç‰ˆæœ¬æ¶ˆé™¤äº†è¿™ä¸€é™åˆ¶ã€‚

è¿™ä¸€å˜åŒ–é¢„è®¡ä¸ä¼šå½±å“ç®€å•çš„ç¼–è¯‘å·¥ä½œæµç¨‹ï¼Œå› ä¸ºåœ¨ä»å¤´ç¼–è¯‘æ•´ä¸ªé¡¹ç›®æ—¶ï¼Œå‡ ä¹æ²¡æœ‰ç†ç”±ä¸ºä¸åŒçš„åˆçº¦è¯·æ±‚ä¸åŒçš„è¾“å‡ºã€‚
ç„¶è€Œï¼Œå®ƒå¯èƒ½å…è®¸æ¡†æ¶å®ç°æ›´é«˜çº§çš„å·¥ä½œæµç¨‹ï¼Œé€šè¿‡ç¼“å­˜è¾“å‡ºå¹¶ä»…é€‰æ‹©æ€§åœ°è¯·æ±‚é¢„æœŸä¼šæ›´æ”¹çš„è¾“å‡ºæ¥åŠ é€Ÿä¿®æ”¹ä»£ç çš„é‡æ–°ç¼–è¯‘ã€‚

è¯·æ³¨æ„ï¼Œæ­¤æ›´æ”¹ä»…å½±å“æ ‡å‡† JSON æ¥å£ï¼Œå› ä¸ºé€šè¿‡ CLI ä¸æä¾›æ¯ä¸ªåˆçº¦çš„è¾“å‡ºé€‰æ‹©ã€‚

# å®Œæ•´å˜æ›´æ—¥å¿—

## è¯­è¨€ç‰¹æ€§

* ç°åœ¨å…¨é¢æ”¯æŒå€¼ç±»å‹çš„ç¬æ€å­˜å‚¨çŠ¶æ€å˜é‡ã€‚

## ç¼–è¯‘å™¨ç‰¹æ€§

* é€šç”¨ï¼šä»…æŒ‰éœ€ç”Ÿæˆ Yul ASTs çš„ JSON è¡¨ç¤ºä»¥å‡å°‘å†…å­˜ä½¿ç”¨ã€‚
* æ ‡å‡† JSON æ¥å£ï¼šç°åœ¨å¯ä»¥ä¸ºéƒ¨åˆ†åˆçº¦è¯·æ±‚å­—èŠ‚ç æˆ– IRï¼Œè€Œä¸ä¼šè§¦å‘å…¶ä»–åˆçº¦çš„ä¸å¿…è¦ä»£ç ç”Ÿæˆã€‚

## é”™è¯¯ä¿®å¤

* SMTCheckerï¼šä¿®å¤åœ¨åˆ†é…åœ°å€æ•°ç»„æ—¶çš„ SMT é€»è¾‘é”™è¯¯ã€‚
* Yul ASTï¼šä¿®å¤å½“è°ƒè¯•ä¿¡æ¯é€‰æ‹©åŒ…å«ä»£ç ç‰‡æ®µæ—¶æœ¬åœ°æºä½ç½®åç§»çš„é—®é¢˜ã€‚

## æ„å»ºç³»ç»Ÿ

* ç§»é™¤äº† `USE_LD_GOLD` é€‰é¡¹ï¼Œé»˜è®¤ä½¿ç”¨ç¼–è¯‘å™¨é»˜è®¤é“¾æ¥å™¨ã€‚å¯¹äºè‡ªå®šä¹‰é“¾æ¥å™¨ï¼Œå¯ä»¥ä½¿ç”¨ `CMAKE_CXX_FLAGS`ã€‚

# å¦‚ä½•å®‰è£…/å‡çº§ï¼Ÿ

è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„ Solidity ç¼–è¯‘å™¨ï¼Œè¯·æŒ‰ç…§æˆ‘ä»¬æ–‡æ¡£ä¸­çš„ [å®‰è£…è¯´æ˜](https://docs.soliditylang.org/en/v0.8.28/installing-solidity.html) è¿›è¡Œæ“ä½œã€‚
ä½ å¯ä»¥åœ¨æ­¤å¤„ä¸‹è½½ Solidity çš„æ–°ç‰ˆæœ¬ï¼š[v0.8.28](https://github.com/ethereum/solidity/releases/tag/v0.8.28)ã€‚

å¦‚æœä½ æƒ³ä»æºä»£ç æ„å»ºï¼Œè¯·ä¸è¦ä½¿ç”¨ GitHub è‡ªåŠ¨ç”Ÿæˆçš„æºä»£ç å½’æ¡£æ–‡ä»¶ã€‚ç›¸åï¼Œè¯·ä½¿ç”¨ [solidity_0.8.28.tar.gz æºä»£ç å‹ç¼©åŒ…](https://github.com/ethereum/solidity/releases/download/v0.8.28/solidity_0.8.28.tar.gz) æˆ–é€šè¿‡ git æ£€å‡º `v0.8.28` æ ‡ç­¾ã€‚

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬è¦å‘æ‰€æœ‰å¸®åŠ©å®ç°æ­¤ç‰ˆæœ¬çš„è´¡çŒ®è€…è¡¨ç¤ºè¡·å¿ƒçš„æ„Ÿè°¢ï¼

> æˆ‘æ˜¯ [AI ç¿»è¯‘å®˜](https://learnblockchain.cn/people/19584)ï¼Œä¸ºå¤§å®¶è½¬è¯‘ä¼˜ç§€è‹±æ–‡æ–‡ç« ï¼Œå¦‚æœ‰ç¿»è¯‘ä¸é€šçš„åœ°æ–¹ï¼Œåœ¨[è¿™é‡Œ](https://github.com/lbc-team/Pioneer/blob/master/translations/9501.md)ä¿®æ”¹ï¼Œè¿˜è¯·åŒ…æ¶µï½